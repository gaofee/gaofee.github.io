<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://note.gaofee.cc/javadocs/ssm/day01-MyBatis.html"><meta property="og:site_name" content="ä»£ç å²›"><meta property="og:title" content="day01-MyBatis"><meta property="og:description" content="ä¸€ã€MyBatisç®€ä»‹ 1.1 æ¡†æ¶æ¦‚å¿µ æ¡†æ¶ï¼Œå°±æ˜¯è½¯ä»¶çš„åŠæˆå“ï¼Œå®Œæˆäº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„é€šç”¨æ“ä½œï¼Œç¨‹åºå‘˜åªéœ€å¾ˆå°‘æˆ–è€…ä¸ç”¨è¿›è¡ŒåŠ å·¥å°±èƒ½å¤Ÿå®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘ä¸­çš„æ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ 1.2 å¸¸ç”¨æ¡†æ¶MVCæ¡†æ¶ï¼šç®€åŒ–äº†Servletçš„å¼€å‘æ­¥éª¤; Struts; Struts2; SpringMVC; æŒä¹…å±‚æ¡†æ¶ï¼šå®Œæˆæ•°æ®åº“..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-03-17T07:36:36.000Z"><meta property="article:modified_time" content="2023-03-17T07:36:36.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"day01-MyBatis","image":[""],"dateModified":"2023-03-17T07:36:36.000Z","author":[]}</script><title>day01-MyBatis | ä»£ç å²›</title><meta name="description" content="ä¸€ã€MyBatisç®€ä»‹ 1.1 æ¡†æ¶æ¦‚å¿µ æ¡†æ¶ï¼Œå°±æ˜¯è½¯ä»¶çš„åŠæˆå“ï¼Œå®Œæˆäº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„é€šç”¨æ“ä½œï¼Œç¨‹åºå‘˜åªéœ€å¾ˆå°‘æˆ–è€…ä¸ç”¨è¿›è¡ŒåŠ å·¥å°±èƒ½å¤Ÿå®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘ä¸­çš„æ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ 1.2 å¸¸ç”¨æ¡†æ¶MVCæ¡†æ¶ï¼šç®€åŒ–äº†Servletçš„å¼€å‘æ­¥éª¤; Struts; Struts2; SpringMVC; æŒä¹…å±‚æ¡†æ¶ï¼šå®Œæˆæ•°æ®åº“...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-f70180fb.css" as="style"><link rel="stylesheet" href="/assets/style-f70180fb.css">
    <link rel="modulepreload" href="/assets/app-fb5cc174.js"><link rel="modulepreload" href="/assets/framework-251de721.js"><link rel="modulepreload" href="/assets/day01-MyBatis.html-2e4cc767.js"><link rel="modulepreload" href="/assets/day01-MyBatis.html-91ac3003.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="ä»£ç å²›"><!----><span class="site-name hide-in-pad">ä»£ç å²›</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="JAVAç§æ•™æŠ¤èˆªè®¡åˆ’"><span class="font-icon icon iconfont icon-home" style=""></span>JAVAç§æ•™æŠ¤èˆªè®¡åˆ’<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å­¦ä¹ æ•™ç¨‹"><span class="title"><span class="font-icon icon iconfont icon-discover" style=""></span>å­¦ä¹ æ•™ç¨‹</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/javadocs/javase/day01-java%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html" class="nav-link" aria-label="JavaåŸºç¡€"><span class="font-icon icon iconfont icon-note" style=""></span>JavaåŸºç¡€<!----></a></li><li class="dropdown-item"><a href="/javadocs/javaweb/day01-mysql%E5%9F%BA%E7%A1%80.html" class="nav-link" aria-label="JavaWeb"><span class="font-icon icon iconfont icon-note" style=""></span>JavaWeb<!----></a></li><li class="dropdown-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html" class="router-link-active router-link-exact-active nav-link active" aria-label="SSMæ¡†æ¶"><span class="font-icon icon iconfont icon-note" style=""></span>SSMæ¡†æ¶<!----></a></li><li class="dropdown-item"><a href="/javadocs/springboot/day01-%E7%AC%AC%E4%B8%80%E4%B8%AASpringBoot%E7%A8%8B%E5%BA%8F.html" class="nav-link" aria-label="Springboot"><span class="font-icon icon iconfont icon-note" style=""></span>Springboot<!----></a></li><li class="dropdown-item"><a href="/javadocs/springcloud/day01-SpringCloud%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5.html" class="nav-link" aria-label="Springcloud"><span class="font-icon icon iconfont icon-note" style=""></span>Springcloud<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/mianshi/%E6%9C%80%E5%85%A8%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0.html" class="nav-link" aria-label="é¢è¯•å®å…¸"><span class="font-icon icon iconfont icon-note" style=""></span>é¢è¯•å®å…¸<!----></a></div><div class="nav-item hide-in-mobile"><a href="/plandocs/learnguid.html" class="nav-link" aria-label="å­¦ä¹ æŒ‡å—"><span class="font-icon icon iconfont icon-creative" style=""></span>å­¦ä¹ æŒ‡å—<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="JAVAç§æ•™æŠ¤èˆªè®¡åˆ’"><span class="font-icon icon iconfont icon-home" style=""></span>JAVAç§æ•™æŠ¤èˆªè®¡åˆ’<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">JavaåŸºç¡€</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">JavaWeb</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">SSMæ¡†æ¶</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="day01-MyBatis"><span class="font-icon icon iconfont icon-note" style=""></span>day01-MyBatis<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¸€ã€mybatisç®€ä»‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ã€MyBatisç®€ä»‹"><!---->ä¸€ã€MyBatisç®€ä»‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#äºŒã€mybatisæ¡†æ¶éƒ¨ç½²" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒã€MyBatisæ¡†æ¶éƒ¨ç½²"><!---->äºŒã€MyBatisæ¡†æ¶éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¸‰ã€mybatisæ¡†æ¶ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ã€MyBatisæ¡†æ¶ä½¿ç”¨"><!---->ä¸‰ã€MyBatisæ¡†æ¶ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#å››ã€å•å…ƒæµ‹è¯•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å››ã€å•å…ƒæµ‹è¯•"><!---->å››ã€å•å…ƒæµ‹è¯•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#äº”ã€mybatisçš„crudæ“ä½œ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº”ã€MyBatisçš„CRUDæ“ä½œ"><!---->äº”ã€MyBatisçš„CRUDæ“ä½œ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#å…­ã€mybatiså·¥å…·ç±»å°è£…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…­ã€MyBatiså·¥å…·ç±»å°è£…"><!---->å…­ã€MyBatiså·¥å…·ç±»å°è£…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¸ƒã€äº‹åŠ¡ç®¡ç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ƒã€äº‹åŠ¡ç®¡ç†"><!---->ä¸ƒã€äº‹åŠ¡ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#å…«ã€mybatisä¸»é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…«ã€MyBatisä¸»é…ç½®æ–‡ä»¶"><!---->å…«ã€MyBatisä¸»é…ç½®æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¹ã€æ˜ å°„æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¹ã€æ˜ å°„æ–‡ä»¶"><!---->ä¹ã€æ˜ å°„æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åã€åˆ†é¡µæ’ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åã€åˆ†é¡µæ’ä»¶"><!---->åã€åˆ†é¡µæ’ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åä¸€ã€å…³è”æ˜ å°„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åä¸€ã€å…³è”æ˜ å°„"><!---->åä¸€ã€å…³è”æ˜ å°„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åäºŒã€åŠ¨æ€sql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åäºŒã€åŠ¨æ€SQL"><!---->åäºŒã€åŠ¨æ€SQL<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢"><!---->åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åå››ã€mybatisæ—¥å¿—é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åå››ã€MyBatisæ—¥å¿—é…ç½®"><!---->åå››ã€MyBatisæ—¥å¿—é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆdruid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆDruid"><!---->åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆDruid<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åå…­ã€mybatisç¼“å­˜" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åå…­ã€MyBatisç¼“å­˜"><!---->åå…­ã€MyBatisç¼“å­˜<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åä¸ƒã€å»¶è¿ŸåŠ è½½" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åä¸ƒã€å»¶è¿ŸåŠ è½½"><!---->åä¸ƒã€å»¶è¿ŸåŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ç»ƒä¹ ä»»åŠ¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç»ƒä¹ ä»»åŠ¡"><!---->ç»ƒä¹ ä»»åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/javadocs/ssm/day02-Spring.html" class="nav-link sidebar-link sidebar-page" aria-label="day02-Spring"><span class="font-icon icon iconfont icon-note" style=""></span>day02-Spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/javadocs/ssm/day03-SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="day03-SpringMVC"><span class="font-icon icon iconfont icon-note" style=""></span>day03-SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">Springboot</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-note" style=""></span><span class="title">Springcloud</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-note" style=""></span>day01-MyBatis</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://note.gaofee.cc" target="_blank" rel="noopener noreferrer">ä»£ç å²›</a></span><span property="author" content="ä»£ç å²›"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-03-17T07:36:36.000Z"></span><span class="page-pageview-info" aria-label="è®¿é—®é‡ğŸ”¢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span class="waline-pageview-count" data-path="/javadocs/ssm/day01-MyBatis.html">...</span></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 24 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT24M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¸€ã€mybatisç®€ä»‹" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€MyBatisç®€ä»‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#äºŒã€mybatisæ¡†æ¶éƒ¨ç½²" class="router-link-active router-link-exact-active toc-link level2">äºŒã€MyBatisæ¡†æ¶éƒ¨ç½²</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¸‰ã€mybatisæ¡†æ¶ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ã€MyBatisæ¡†æ¶ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#å››ã€å•å…ƒæµ‹è¯•" class="router-link-active router-link-exact-active toc-link level2">å››ã€å•å…ƒæµ‹è¯•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#äº”ã€mybatisçš„crudæ“ä½œ" class="router-link-active router-link-exact-active toc-link level2">äº”ã€MyBatisçš„CRUDæ“ä½œ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#å…­ã€mybatiså·¥å…·ç±»å°è£…" class="router-link-active router-link-exact-active toc-link level2">å…­ã€MyBatiså·¥å…·ç±»å°è£…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¸ƒã€äº‹åŠ¡ç®¡ç†" class="router-link-active router-link-exact-active toc-link level2">ä¸ƒã€äº‹åŠ¡ç®¡ç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#å…«ã€mybatisä¸»é…ç½®æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level2">å…«ã€MyBatisä¸»é…ç½®æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ä¹ã€æ˜ å°„æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level2">ä¹ã€æ˜ å°„æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åã€åˆ†é¡µæ’ä»¶" class="router-link-active router-link-exact-active toc-link level2">åã€åˆ†é¡µæ’ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åä¸€ã€å…³è”æ˜ å°„" class="router-link-active router-link-exact-active toc-link level2">åä¸€ã€å…³è”æ˜ å°„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åäºŒã€åŠ¨æ€sql" class="router-link-active router-link-exact-active toc-link level2">åäºŒã€åŠ¨æ€SQL</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢" class="router-link-active router-link-exact-active toc-link level2">åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åå››ã€mybatisæ—¥å¿—é…ç½®" class="router-link-active router-link-exact-active toc-link level2">åå››ã€MyBatisæ—¥å¿—é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆdruid" class="router-link-active router-link-exact-active toc-link level2">åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆDruid</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åå…­ã€mybatisç¼“å­˜" class="router-link-active router-link-exact-active toc-link level2">åå…­ã€MyBatisç¼“å­˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#åä¸ƒã€å»¶è¿ŸåŠ è½½" class="router-link-active router-link-exact-active toc-link level2">åä¸ƒã€å»¶è¿ŸåŠ è½½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/javadocs/ssm/day01-MyBatis.html#ç»ƒä¹ ä»»åŠ¡" class="router-link-active router-link-exact-active toc-link level2">ç»ƒä¹ ä»»åŠ¡</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="ä¸€ã€mybatisç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€mybatisç®€ä»‹" aria-hidden="true">#</a> ä¸€ã€MyBatisç®€ä»‹</h2><h4 id="_1-1-æ¡†æ¶æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1-1-æ¡†æ¶æ¦‚å¿µ" aria-hidden="true">#</a> 1.1 æ¡†æ¶æ¦‚å¿µ</h4><blockquote><p>æ¡†æ¶ï¼Œå°±æ˜¯è½¯ä»¶çš„åŠæˆå“ï¼Œå®Œæˆäº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„é€šç”¨æ“ä½œï¼Œç¨‹åºå‘˜åªéœ€å¾ˆå°‘æˆ–è€…ä¸ç”¨è¿›è¡ŒåŠ å·¥å°±èƒ½å¤Ÿå®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œä»è€Œç®€åŒ–å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘ä¸­çš„æ­¥éª¤ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p></blockquote><h4 id="_1-2-å¸¸ç”¨æ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#_1-2-å¸¸ç”¨æ¡†æ¶" aria-hidden="true">#</a> 1.2 å¸¸ç”¨æ¡†æ¶</h4><ul><li>MVCæ¡†æ¶ï¼šç®€åŒ–äº†Servletçš„å¼€å‘æ­¥éª¤ <ul><li>Struts</li><li>Struts2</li><li><code>SpringMVC</code></li></ul></li><li>æŒä¹…å±‚æ¡†æ¶ï¼šå®Œæˆæ•°æ®åº“æ“ä½œçš„æ¡†æ¶ <ul><li>apache DBUtils</li><li>Hibernate</li><li>Spring JPA</li><li><code>MyBatis</code></li><li>EJB3.0</li></ul></li><li>èƒ¶æ°´æ¡†æ¶ï¼š<code>Spring</code></li></ul><p>SSM Spring SpringMVC MyBatis</p><p>SSH Spring Struts2 Hibernate</p><h4 id="_1-3-mybatisä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-3-mybatisä»‹ç»" aria-hidden="true">#</a> 1.3 MyBatisä»‹ç»</h4><blockquote><p>MyBatisæ˜¯ä¸€ä¸ª<code>åŠè‡ªåŠ¨</code>çš„<code>ORM</code>æ¡†æ¶</p><p>ORMï¼ˆObject Relational Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ï¼Œå°†Javaä¸­çš„ä¸€ä¸ªå¯¹è±¡ä¸æ•°æ®è¡¨ä¸­ä¸€è¡Œè®°å½•ä¸€ä¸€å¯¹åº”ã€‚</p><p>ORMæ¡†æ¶æä¾›äº†å®ä½“ç±»ä¸æ•°æ®è¡¨çš„æ˜ å°„å…³ç³»ï¼Œé€šè¿‡æ˜ å°„æ–‡ä»¶çš„é…ç½®ï¼Œå®ç°å¯¹è±¡çš„æŒä¹…åŒ–ã€‚</p></blockquote><ul><li>MyBatisçš„å‰èº«æ˜¯iBatisï¼ŒiBatisæ˜¯Apacheè½¯ä»¶åŸºé‡‘ä¼šæä¾›çš„ä¸€ä¸ªå¼€æºé¡¹ç›®</li><li>2010å¹´iBatisè¿ç§»åˆ°Google codeï¼Œæ­£å¼æ›´åä¸ºMyBatis</li><li>2013å¹´è¿ç§»åˆ°Githubæ‰˜ç®¡</li><li>MyBatisç‰¹ç‚¹ï¼š <ul><li>æ”¯æŒè‡ªå®šä¹‰SQLã€å­˜å‚¨è¿‡ç¨‹</li><li>å¯¹åŸæœ‰çš„JDBCè¿›è¡Œäº†å°è£…ï¼Œå‡ ä¹æ¶ˆé™¤äº†æ‰€æœ‰JDBCä»£ç ï¼Œè®©å¼€å‘è€…åªéœ€å…³æ³¨SQLæœ¬èº«</li><li>æ”¯æŒXMLå’Œæ³¨è§£é…ç½®æ–¹å¼è‡ªå®šå®ŒæˆORMæ“ä½œï¼Œå®ç°ç»“æœæ˜ å°„</li></ul></li></ul><h2 id="äºŒã€mybatisæ¡†æ¶éƒ¨ç½²" tabindex="-1"><a class="header-anchor" href="#äºŒã€mybatisæ¡†æ¶éƒ¨ç½²" aria-hidden="true">#</a> äºŒã€MyBatisæ¡†æ¶éƒ¨ç½²</h2><blockquote><p>æ¡†æ¶éƒ¨ç½²ï¼Œå°±æ˜¯å°†æ¡†æ¶å¼•å…¥åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­</p></blockquote><h4 id="_2-1-åˆ›å»ºmavené¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_2-1-åˆ›å»ºmavené¡¹ç›®" aria-hidden="true">#</a> 2.1 åˆ›å»ºMavené¡¹ç›®</h4><ul><li>Javaå·¥ç¨‹</li><li>Webå·¥ç¨‹</li></ul><h4 id="_2-2-åœ¨é¡¹ç›®ä¸­æ·»åŠ mybatisä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_2-2-åœ¨é¡¹ç›®ä¸­æ·»åŠ mybatisä¾èµ–" aria-hidden="true">#</a> 2.2 åœ¨é¡¹ç›®ä¸­æ·»åŠ MyBatisä¾èµ–</h4><ul><li><p>åœ¨pom.xmlä¸­æ·»åŠ ä¾èµ–</p><ul><li>mybatis</li><li>mysql driver</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_2-3-åˆ›å»ºmybatisé…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-3-åˆ›å»ºmybatisé…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 2.3 åˆ›å»ºMyBatisé…ç½®æ–‡ä»¶</h4><ul><li><p>åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿ï¼šé€‰æ‹©resources----å³é”®New----Edit File Templates</p><figure><img src="https://gaofee.cc/images/202303171047323.png" alt="1616144597211" tabindex="0" loading="lazy"><figcaption>1616144597211</figcaption></figure></li><li><p>åœ¨resourcesä¸­åˆ›å»ºåä¸º<code>mybatis-config.xml</code>çš„æ–‡ä»¶</p></li><li><p>åœ¨<code>mybatis-config.xml</code>æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token comment">&lt;!-- åœ¨environmentsé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ --&gt;</span>
    <span class="token comment">&lt;!-- åœ¨environmentsæ ‡ç­¾ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªenvironmentæ ‡ç­¾ï¼Œæ¯ä¸ªenvironmentæ ‡ç­¾å¯ä»¥å®šä¹‰ä¸€å¥—è¿æ¥é…ç½® --&gt;</span>
    <span class="token comment">&lt;!-- defaultå±æ€§ï¼Œç”¨æ¥æŒ‡å®šä½¿ç”¨å“ªä¸ªenvironmentæ ‡ç­¾ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--transactionManageræ ‡ç­¾ç”¨äºé…ç½®æ•°æ®åº“ç®¡ç†æ–¹å¼--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--dataSourceæ ‡ç­¾å°±æ˜¯ç”¨æ¥é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/db_2010_fmwy?characterEncoding=utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin123<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="ä¸‰ã€mybatisæ¡†æ¶ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€mybatisæ¡†æ¶ä½¿ç”¨" aria-hidden="true">#</a> ä¸‰ã€MyBatisæ¡†æ¶ä½¿ç”¨</h2><blockquote><p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯çš„æ•°æ®åº“æ“ä½œ</p></blockquote><h4 id="_3-1-åˆ›å»ºæ•°æ®è¡¨" tabindex="-1"><a class="header-anchor" href="#_3-1-åˆ›å»ºæ•°æ®è¡¨" aria-hidden="true">#</a> 3.1 åˆ›å»ºæ•°æ®è¡¨</h4><table><thead><tr><th>tb_students</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047324.png" alt="1616145569298" loading="lazy"></td></tr></tbody></table><h4 id="_3-2-åˆ›å»ºå®ä½“ç±»" tabindex="-1"><a class="header-anchor" href="#_3-2-åˆ›å»ºå®ä½“ç±»" aria-hidden="true">#</a> 3.2 åˆ›å»ºå®ä½“ç±»</h4><table><thead><tr><th>Student.java</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047325.png" alt="1616145876310" loading="lazy"></td></tr></tbody></table><h4 id="_3-3-åˆ›å»ºdaoæ¥å£-å®šä¹‰æ“ä½œæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_3-3-åˆ›å»ºdaoæ¥å£-å®šä¹‰æ“ä½œæ–¹æ³•" aria-hidden="true">#</a> 3.3 åˆ›å»ºDAOæ¥å£ï¼Œå®šä¹‰æ“ä½œæ–¹æ³•</h4><table><thead><tr><th>StudentDAO.java</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047326.png" alt="1616147015300" loading="lazy"></td></tr></tbody></table><h4 id="_3-4-åˆ›å»ºdaoæ¥å£çš„æ˜ å°„æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-4-åˆ›å»ºdaoæ¥å£çš„æ˜ å°„æ–‡ä»¶" aria-hidden="true">#</a> 3.4 åˆ›å»ºDAOæ¥å£çš„æ˜ å°„æ–‡ä»¶</h4><ul><li>åœ¨<code>resources</code>ç›®å½•ä¸‹ï¼Œæ–°å»ºåä¸º<code>mappers</code>æ–‡ä»¶å¤¹</li><li>åœ¨<code>mappers</code>ä¸­æ–°å»ºåä¸º<code>StudentMapper.xml</code>çš„æ˜ å°„æ–‡ä»¶ï¼ˆæ ¹æ®æ¨¡æ¿åˆ›å»ºï¼‰</li><li>åœ¨æ˜ å°„æ–‡ä»¶ä¸­å¯¹DAOä¸­å®šä¹‰çš„æ–¹æ³•è¿›è¡Œå®ç°ï¼š</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--mapperæ–‡ä»¶ç›¸å½“äºDAOæ¥å£çš„â€˜å®ç°ç±»â€™ï¼Œnamespaceå±æ€§è¦æŒ‡å®š`å®ç°`DAOæ¥å£çš„å…¨é™å®šå--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.qfedu.dao.StudentDAO<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertStudent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        insert into tb_students(stu_num,stu_name,stu_gender,stu_age)
        values(#{stuNum},#{stuName},#{stuGender},#{stuAge})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteStudent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        delete from tb_students where stu_num=#{stuNum}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-5-å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-5-å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 3.5 å°†æ˜ å°„æ–‡ä»¶æ·»åŠ åˆ°ä¸»é…ç½®æ–‡ä»¶</h4><table><thead><tr><th>mybatis-config.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047327.png" alt="1616146926729" loading="lazy"></td></tr></tbody></table><h2 id="å››ã€å•å…ƒæµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#å››ã€å•å…ƒæµ‹è¯•" aria-hidden="true">#</a> å››ã€å•å…ƒæµ‹è¯•</h2><h4 id="_4-1-æ·»åŠ å•å…ƒæµ‹ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_4-1-æ·»åŠ å•å…ƒæµ‹ä¾èµ–" aria-hidden="true">#</a> 4.1 æ·»åŠ å•å…ƒæµ‹ä¾èµ–</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-åˆ›å»ºå•å…ƒæµ‹è¯•ç±»" tabindex="-1"><a class="header-anchor" href="#_4-2-åˆ›å»ºå•å…ƒæµ‹è¯•ç±»" aria-hidden="true">#</a> 4.2 åˆ›å»ºå•å…ƒæµ‹è¯•ç±»</h4><table><thead><tr><th>åœ¨è¢«æµ‹è¯•ç±»ååalt+insert --- é€‰æ‹©Test</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047328.png" alt="1616147095936" loading="lazy"></td></tr><tr><td><img src="https://gaofee.cc/images/202303171047329.png" alt="1616147180562" loading="lazy"></td></tr></tbody></table><h4 id="_4-3-æµ‹è¯•ä»£ç " tabindex="-1"><a class="header-anchor" href="#_4-3-æµ‹è¯•ä»£ç " aria-hidden="true">#</a> 4.3 æµ‹è¯•ä»£ç </h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>qfedu<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>qfedu<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">Student</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">.</span></span><span class="token class-name">SqlSessionFactoryBuilder</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentDAOTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@org.junit.Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//åŠ è½½mybatisé…ç½®æ–‡ä»¶</span>
            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactoryBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//ä¼šè¯å·¥å‚</span>
            <span class="token class-name">SqlSessionFactory</span> factory <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//ä¼šè¯ï¼ˆè¿æ¥ï¼‰</span>
            <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//é€šè¿‡ä¼šè¯è·å–DAOå¯¹è±¡</span>
            <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//æµ‹è¯•StudentDAOä¸­çš„æ–¹æ³•</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">insertStudent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;10001&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ç”·&quot;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//éœ€è¦æ‰‹åŠ¨æäº¤</span>
            sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@org.junit.Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äº”ã€mybatisçš„crudæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#äº”ã€mybatisçš„crudæ“ä½œ" aria-hidden="true">#</a> äº”ã€MyBatisçš„CRUDæ“ä½œ</h2><blockquote><p>æ¡ˆä¾‹:å­¦ç”Ÿä¿¡æ¯çš„å¢åˆ æŸ¥æ”¹</p></blockquote><h4 id="_5-1-æ·»åŠ æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-1-æ·»åŠ æ“ä½œ" aria-hidden="true">#</a> 5.1 æ·»åŠ æ“ä½œ</h4><p>ç•¥</p><h4 id="_5-2-åˆ é™¤æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-2-åˆ é™¤æ“ä½œ" aria-hidden="true">#</a> 5.2 åˆ é™¤æ“ä½œ</h4><blockquote><p>æ ¹æ®å­¦å·åˆ é™¤ä¸€æ¡å­¦ç”Ÿä¿¡æ¯</p></blockquote><ul><li>åœ¨StudentDAOä¸­å®šä¹‰åˆ é™¤æ–¹æ³•</li></ul><table><thead><tr><th>StudentDAO</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047330.png" alt="1616463209812" loading="lazy"></td></tr></tbody></table><ul><li>åœ¨StudentMapper.xmlä¸­å¯¹æ¥å£æ–¹æ³•è¿›è¡Œâ€œå®ç°â€</li></ul><table><thead><tr><th>StudentMapper.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047331.png" alt="1616463282187" loading="lazy"></td></tr></tbody></table><ul><li>æµ‹è¯•ï¼šåœ¨StudentDAOçš„æµ‹è¯•ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•</li></ul><table><thead><tr><th>StudentDAOTest</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047332.png" alt="1616464771784" loading="lazy"></td></tr></tbody></table><h4 id="_5-3-ä¿®æ”¹æ“ä½œ" tabindex="-1"><a class="header-anchor" href="#_5-3-ä¿®æ”¹æ“ä½œ" aria-hidden="true">#</a> 5.3 ä¿®æ”¹æ“ä½œ</h4><blockquote><p>æ ¹æ®å­¦ç”Ÿå­¦å·ï¼Œä¿®æ”¹å…¶ä»–å­—æ®µä¿¡æ¯</p></blockquote><ul><li>åœ¨StudentDAOæ¥å£ä¸­å®šä¹‰ä¿®æ”¹æ–¹æ³•</li></ul><table><thead><tr><th>StudentDAO</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047333.png" alt="1616465607290" loading="lazy"></td></tr></tbody></table><ul><li>åœ¨StudentMapper.xmlä¸­â€œå®ç°â€æ¥å£ä¸­å®šä¹‰çš„ä¿®æ”¹æ–¹æ³•</li></ul><table><thead><tr><th>StudentMapper.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047334.png" alt="1616465639080" loading="lazy"></td></tr></tbody></table><ul><li>å•å…ƒæµ‹è¯•</li></ul><table><thead><tr><th>StudentDAOTest</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047335.png" alt="1616465667657" loading="lazy"></td></tr></tbody></table><h4 id="_5-4-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰" tabindex="-1"><a class="header-anchor" href="#_5-4-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰" aria-hidden="true">#</a> 5.4 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ‰€æœ‰</h4><ul><li>åœ¨StudentDAOæ¥å£å®šä¹‰æ“ä½œæ–¹æ³•</li></ul><table><thead><tr><th>StudentDAO</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047336.png" alt="1616467216382" loading="lazy"></td></tr></tbody></table><ul><li>åœ¨StudentMapper.xmlä¸­â€œå®ç°â€DAOä¸­å®šä¹‰çš„æ–¹æ³•</li></ul><table><thead><tr><th>StudentMapper.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047337.png" alt="1616467314082" loading="lazy"></td></tr></tbody></table><ul><li>å•å…ƒæµ‹è¯•</li></ul><table><thead><tr><th>StudentDAOTest</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047338.png" alt="1616467336432" loading="lazy"></td></tr></tbody></table><h4 id="_5-5-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢ä¸€æ¡è®°å½•" tabindex="-1"><a class="header-anchor" href="#_5-5-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢ä¸€æ¡è®°å½•" aria-hidden="true">#</a> 5.5 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢ä¸€æ¡è®°å½•</h4><blockquote><p>æ ¹æ®å­¦å·æŸ¥è¯¢ä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯</p></blockquote><ul><li>åœ¨StudentDAOæ¥å£ä¸­å®šä¹‰æ–¹æ³•</li></ul><table><thead><tr><th>StudentDAO</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047339.png" alt="1616469113754" loading="lazy"></td></tr></tbody></table><ul><li>åœ¨StudentDAOMapper.xmlä¸­é…ç½®StudentDAOæ¥å£çš„æ–¹æ³•å®ç°â€”â€”SQL</li></ul><table><thead><tr><th>StudentDAOMapper.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047340.png" alt="1616469142604" loading="lazy"></td></tr></tbody></table><ul><li>å•å…ƒæµ‹è¯•</li></ul><table><thead><tr><th>StudentDAOTest</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047341.png" alt="1616469154258" loading="lazy"></td></tr></tbody></table><h4 id="_5-6-æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_5-6-æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢" aria-hidden="true">#</a> 5.6 æŸ¥è¯¢æ“ä½œ-å¤šå‚æ•°æŸ¥è¯¢</h4><blockquote><p>åˆ†é¡µæŸ¥è¯¢ï¼ˆå‚æ•° start ï¼Œ pageSizeï¼‰</p></blockquote><ul><li>åœ¨StudentDAOä¸­å®šä¹‰æ“ä½œæ–¹æ³•ï¼Œå¦‚æœæ–¹æ³•æœ‰å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨<code>@Param</code>æ³¨è§£å£°æ˜å‚æ•°çš„åˆ«å</li></ul><table><thead><tr><th>StudentDAO</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047342.png" alt="1616470534343" loading="lazy"></td></tr></tbody></table><ul><li>åœ¨StudentMapper.xmlé…ç½®sqlæ—¶ï¼Œä½¿ç”¨<code>#{åˆ«å}</code>è·å–åˆ°æŒ‡å®šçš„å‚æ•°</li></ul><table><thead><tr><th>StudentMapper.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047343.png" alt="1616470612608" loading="lazy"></td></tr></tbody></table><p><strong><code>æ³¨æ„</code></strong> å¦‚æœDAOæ“ä½œæ–¹æ³•æ²¡æœ‰é€šè¿‡@ParamæŒ‡å®šå‚æ•°åˆ«åï¼Œåœ¨SQLä¸­ä¹Ÿå¯ä»¥é€šè¿‡<code>arg0,arg1...</code>æˆ–è€…<code>param1,param2,...</code>è·å–å‚æ•°</p><h4 id="_5-7-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°" tabindex="-1"><a class="header-anchor" href="#_5-7-æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°" aria-hidden="true">#</a> 5.7 æŸ¥è¯¢æ“ä½œ-æŸ¥è¯¢æ€»è®°å½•æ•°</h4><ul><li>åœ¨StudentDAOæ¥å£ä¸­å®šä¹‰æ“ä½œæ–¹æ³•</li></ul><table><thead><tr><th>StudentDAO</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047344.png" alt="1616471133486" loading="lazy"></td></tr></tbody></table><ul><li>åœ¨StudentMapper.xmlé…ç½®sqlï¼Œé€šè¿‡resultTypeæŒ‡å®šå½“å‰æ“ä½œçš„è¿”å›ç±»å‹ä¸ºint</li></ul><table><thead><tr><th></th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047345.png" alt="1616471056064" loading="lazy"></td></tr></tbody></table><h4 id="_5-8-æ·»åŠ æ“ä½œå›å¡«ç”Ÿæˆçš„ä¸»é”®" tabindex="-1"><a class="header-anchor" href="#_5-8-æ·»åŠ æ“ä½œå›å¡«ç”Ÿæˆçš„ä¸»é”®" aria-hidden="true">#</a> 5.8 æ·»åŠ æ“ä½œå›å¡«ç”Ÿæˆçš„ä¸»é”®</h4><ul><li>StduentMapper.xmlçš„æ·»åŠ æ“ä½œæ ‡ç­¾â€”â€”<code>insert</code></li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- useGeneratedKeys è®¾ç½®æ·»åŠ æ“ä½œæ˜¯å¦éœ€è¦å›å¡«ç”Ÿæˆçš„ä¸»é”® --&gt;</span>
<span class="token comment">&lt;!-- keyProperty è®¾ç½®å›å¡«çš„ä¸»é”®å€¼èµ‹å€¼åˆ°å‚æ•°å¯¹è±¡çš„å“ªä¸ªå±æ€§ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertStudent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tb_students(stu_num, stu_name, stu_gender, stu_age)
    values (#{stuNum}, #{stuName}, #{stuGender}, #{stuAge})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…­ã€mybatiså·¥å…·ç±»å°è£…" tabindex="-1"><a class="header-anchor" href="#å…­ã€mybatiså·¥å…·ç±»å°è£…" aria-hidden="true">#</a> å…­ã€MyBatiså·¥å…·ç±»å°è£…</h2><ul><li>MyBatisUtil</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisUtil</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> factory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlSession</span><span class="token punctuation">&gt;</span></span> local <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlSession</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactoryBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            factory <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">getFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> local<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            sqlSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸ƒã€äº‹åŠ¡ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#ä¸ƒã€äº‹åŠ¡ç®¡ç†" aria-hidden="true">#</a> ä¸ƒã€äº‹åŠ¡ç®¡ç†</h2><blockquote><p>SqlSession å¯¹è±¡</p><ul><li>getMapper(DAO.class) : è·å–Mapperï¼ˆDAOæ¥å£çš„å®ä¾‹ï¼‰</li><li>äº‹åŠ¡ç®¡ç†</li></ul></blockquote><h4 id="_7-1-æ‰‹åŠ¨æäº¤äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_7-1-æ‰‹åŠ¨æäº¤äº‹åŠ¡" aria-hidden="true">#</a> 7.1 æ‰‹åŠ¨æäº¤äº‹åŠ¡</h4><ul><li><code>sqlSession.commit();</code>æäº¤äº‹åŠ¡</li><li><code>sqlSession.rollback();</code>äº‹åŠ¡å›æ»š</li></ul><p><strong>æµ‹è¯•ç±»ä¸­è¿›è¡Œäº‹åŠ¡ç®¡ç†</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//1.å½“æˆ‘ä»¬è·å–sqlSessionå¯¹è±¡æ—¶ï¼Œå°±é»˜è®¤å¼€å¯äº†äº‹åŠ¡</span>
    <span class="token keyword">try</span><span class="token punctuation">{</span>
        <span class="token comment">//é€šè¿‡ä¼šè¯è·å–DAOå¯¹è±¡</span>
        <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æµ‹è¯•StudentDAOä¸­çš„æ–¹æ³•</span>
        <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;10005&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Lily&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">insertStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.æ“ä½œå®Œæˆå¹¶æˆåŠŸä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨æäº¤</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//3.å½“æ“ä½œå‡ºç°å¼‚å¸¸ï¼Œè°ƒç”¨rollbackè¿›è¡Œå›æ»š</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸šåŠ¡é€»è¾‘å±‚æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentService</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> b <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">insertStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
            b <span class="token operator">=</span> i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
            sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            sqlSession<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7-2-è‡ªåŠ¨æäº¤äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_7-2-è‡ªåŠ¨æäº¤äº‹åŠ¡" aria-hidden="true">#</a> 7.2 è‡ªåŠ¨æäº¤äº‹åŠ¡</h4><blockquote><p>é€šè¿‡SqlSessionFactoryè°ƒç”¨openSessionæ–¹æ³•è·å–SqlSessionå¯¹è±¡æ—¶ï¼Œå¯ä»¥é€šè¿‡å‚æ•°è®¾ç½®äº‹åŠ¡æ˜¯å¦è‡ªåŠ¨æäº¤ï¼š</p><ul><li><p>å¦‚æœå‚æ•°è®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºè‡ªå®šæäº¤äº‹åŠ¡ï¼š factory.openSession(true);</p></li><li><p>å¦‚æœå‚æ•°è®¾ç½®ä¸ºfalseï¼Œæˆ–è€…ä¸è®¾ç½®å‚æ•°ï¼Œè¡¨ç¤ºæ‰‹åŠ¨æäº¤ï¼šfactory.openSession();/factory.openSession(false);</p></li></ul></blockquote><p><strong>MyBatisUtil</strong>ä¼˜åŒ–</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisUtil</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> factory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlSession</span><span class="token punctuation">&gt;</span></span> local <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlSession</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">SqlSessionFactoryBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            factory <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">getFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isAutoCommit<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> local<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            sqlSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span>isAutoCommit<span class="token punctuation">)</span><span class="token punctuation">;</span>
            local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ‰‹åŠ¨äº‹åŠ¡ç®¡ç†</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è‡ªåŠ¨äº‹åŠ¡æäº¤</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•æ“ä½œ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteStudent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">deleteStudent</span><span class="token punctuation">(</span><span class="token string">&quot;10001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä¸šåŠ¡é€»è¾‘å±‚è‡ªåŠ¨äº‹åŠ¡ç®¡ç†</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentService</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">insertStudent</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> b <span class="token operator">=</span> i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å…«ã€mybatisä¸»é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#å…«ã€mybatisä¸»é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> å…«ã€MyBatisä¸»é…ç½®æ–‡ä»¶</h2><blockquote><p>mybatis-config.xml æ˜¯MyBatisæ¡†æ¶çš„ä¸»é…ç½®æ–‡ä»¶ï¼Œåªè¦ç”¨äºé…ç½®MyBatisæ•°æ®æºåŠå±æ€§ä¿¡æ¯</p></blockquote><h4 id="_8-1-propertiesæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_8-1-propertiesæ ‡ç­¾" aria-hidden="true">#</a> 8.1 propertiesæ ‡ç­¾</h4><blockquote><p>ç”¨äºè®¾ç½®é”®å€¼å¯¹ï¼Œæˆ–è€…åŠ è½½å±æ€§æ–‡ä»¶</p></blockquote><ul><li>åœ¨resourcesç›®å½•ä¸‹åˆ›å»º<code>jdbc.properties</code>æ–‡ä»¶ï¼Œé…ç½®é”®å€¼å¯¹å¦‚ä¸‹ï¼š</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">mysql_driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>
<span class="token key attr-name">mysql_url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/db_2010_fmwy?characterEncoding=utf-8</span>
<span class="token key attr-name">mysql_username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">mysql_password</span><span class="token punctuation">=</span><span class="token value attr-value">admin123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨mybatis-config.xmlä¸­é€šè¿‡<code>properties</code>æ ‡ç­¾å¼•ç”¨<code>jdbc.properties</code>æ–‡ä»¶;å¼•å…¥ä¹‹åï¼Œåœ¨é…ç½®environmentæ—¶å¯ä»¥ç›´æ¥ä½¿ç”¨jdbc.propertiesçš„keyè·å–å¯¹åº”çš„value</li></ul><table><thead><tr><th>mybatis-config.xml</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047346.png" alt="1616482928813" loading="lazy"></td></tr></tbody></table><h4 id="_8-2-settingsæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_8-2-settingsæ ‡ç­¾" aria-hidden="true">#</a> 8.2 settingsæ ‡ç­¾</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--è®¾ç½®mybatisçš„å±æ€§--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¯åŠ¨äºŒçº§ç¼“å­˜--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- å¯åŠ¨å»¶è¿ŸåŠ è½½ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazyLoadingEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-3-typealiasesæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_8-3-typealiasesæ ‡ç­¾" aria-hidden="true">#</a> 8.3 typeAliasesæ ‡ç­¾</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--typeAliasesæ ‡ç­¾ç”¨äºç»™å®ä½“ç±»å–åˆ«åï¼Œåœ¨æ˜ å°„æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨åˆ«åæ¥æ›¿ä»£å®ä½“ç±»çš„å…¨é™å®šå--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.qfedu.pojo.Student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAlias</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.qfedu.pojo.Book<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Book<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAlias</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-4-pluginsæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_8-4-pluginsæ ‡ç­¾" aria-hidden="true">#</a> 8.4 pluginsæ ‡ç­¾</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--pluginsæ ‡ç­¾ï¼Œç”¨äºé…ç½®MyBatisæ’ä»¶ï¼ˆåˆ†é¡µæ’ä»¶ï¼‰--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-5-environmentsæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_8-5-environmentsæ ‡ç­¾" aria-hidden="true">#</a> 8.5 environmentsæ ‡ç­¾</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- åœ¨environmentsé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ --&gt;</span>
<span class="token comment">&lt;!-- åœ¨environmentsæ ‡ç­¾ä¸­å¯ä»¥å®šä¹‰å¤šä¸ªenvironmentæ ‡ç­¾ï¼Œæ¯ä¸ªenvironmentæ ‡ç­¾å¯ä»¥å®šä¹‰ä¸€å¥—è¿æ¥é…ç½® --&gt;</span>
<span class="token comment">&lt;!-- defaultå±æ€§ï¼Œç”¨æ¥æŒ‡å®šä½¿ç”¨å“ªä¸ªenvironmentæ ‡ç­¾ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--  environment æ ‡ç­¾ç”¨äºé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯  --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--transactionManageræ ‡ç­¾ç”¨äºé…ç½®æ•°æ®åº“ç®¡ç†æ–¹å¼
            type=&quot;JDBC&quot;  å¯ä»¥è¿›è¡Œäº‹åŠ¡çš„æäº¤å’Œå›æ»šæ“ä½œ
            type=&quot;MANAGED&quot; ä¾èµ–å®¹å™¨å®Œæˆäº‹åŠ¡ç®¡ç†ï¼Œæœ¬èº«ä¸è¿›è¡Œäº‹åŠ¡çš„æäº¤å’Œå›æ»šæ“ä½œ --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--dataSourceæ ‡ç­¾å°±æ˜¯ç”¨æ¥é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ POOLED|UNPOOLED --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${mysql_driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${mysql_url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${mysql_username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${mysql_password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_8-6-mappersæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_8-6-mappersæ ‡ç­¾" aria-hidden="true">#</a> 8.6 mappersæ ‡ç­¾</h4><blockquote><p>åŠ è½½æ˜ å°„é…ç½®ï¼ˆæ˜ å°„æ–‡ä»¶ã€DAOæ³¨è§£ï¼‰</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--mappersæ ‡ç­¾ç”¨äºè½½å…¥æ˜ å°„æ–‡ä»¶--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mappers/StudentMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¹ã€æ˜ å°„æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#ä¹ã€æ˜ å°„æ–‡ä»¶" aria-hidden="true">#</a> ä¹ã€æ˜ å°„æ–‡ä»¶</h2><h4 id="_9-1-mybatis-mapperåˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#_9-1-mybatis-mapperåˆå§‹åŒ–" aria-hidden="true">#</a> 9.1 MyBatis Mapperåˆå§‹åŒ–</h4><blockquote><p>XMLæ–‡ä»¶è§£æï¼šè¯»å–xmlæ–‡ä»¶ä¸­çš„æ ‡ç­¾é…ç½®å°è£…åˆ°Javaå¯¹è±¡ä¸­</p></blockquote><figure><img src="https://gaofee.cc/images/202303171047347.png" alt="1616487875112" tabindex="0" loading="lazy"><figcaption>1616487875112</figcaption></figure><h4 id="_9-2-mapperæ ¹æ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-2-mapperæ ¹æ ‡ç­¾" aria-hidden="true">#</a> 9.2 mapperæ ¹æ ‡ç­¾</h4><blockquote><p>mapperæ–‡ä»¶ç›¸å½“äºDAOæ¥å£çš„â€˜å®ç°ç±»â€™ï¼Œnamespaceå±æ€§è¦æŒ‡å®š<code>å®ç°</code>DAOæ¥å£çš„å…¨é™å®šå</p></blockquote><h4 id="_9-3-insertæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-3-insertæ ‡ç­¾" aria-hidden="true">#</a> 9.3 insertæ ‡ç­¾</h4><blockquote><p>å£°æ˜æ·»åŠ æ“ä½œï¼ˆsql: insert ...ï¼‰</p><p><strong>å¸¸ç”¨å±æ€§</strong></p><p>idå±æ€§ï¼Œç»‘å®šå¯¹åº”DAOæ¥å£ä¸­çš„æ–¹æ³•</p><p>parameterTypeå±æ€§ï¼Œç”¨ä»¥æŒ‡å®šæ¥å£ä¸­å¯¹åº”æ–¹æ³•çš„å‚æ•°ç±»å‹ï¼ˆå¯çœç•¥ï¼‰</p><p>useGeneratedKeyså±æ€§ï¼Œ è®¾ç½®æ·»åŠ æ“ä½œæ˜¯å¦éœ€è¦å›å¡«ç”Ÿæˆçš„ä¸»é”®</p><p>keyPropertyå±æ€§ï¼ŒæŒ‡å®šå›å¡«çš„idè®¾ç½®åˆ°å‚æ•°å¯¹è±¡ä¸­çš„å“ªä¸ªå±æ€§</p><p>timeoutå±æ€§ï¼Œè®¾ç½®æ­¤æ“ä½œçš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœä¸è®¾ç½®åˆ™ä¸€ç›´ç­‰å¾…</p></blockquote><p><strong>ä¸»é”®å›å¡«</strong></p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertStudent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useGeneratedKeys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into tb_students(stu_num, stu_name, stu_gender, stu_age)
    values (#{stuNum}, #{stuName}, #{stuGender}, #{stuAge})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insertStudent<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Integer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select last_insert_id()
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>
    insert into tb_students(stu_num, stu_name, stu_gender, stu_age)
    values (#{stuNum}, #{stuName}, #{stuGender}, #{stuAge})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-4-deleteæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-4-deleteæ ‡ç­¾" aria-hidden="true">#</a> 9.4 deleteæ ‡ç­¾</h4><blockquote><p>å£°æ˜åˆ é™¤æ“ä½œ</p></blockquote><h4 id="_9-5-updateæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-5-updateæ ‡ç­¾" aria-hidden="true">#</a> 9.5 updateæ ‡ç­¾</h4><blockquote><p>å£°æ˜ä¿®æ”¹æ“ä½œ</p></blockquote><h4 id="_9-6-selectæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-6-selectæ ‡ç­¾" aria-hidden="true">#</a> 9.6 selectæ ‡ç­¾</h4><blockquote><p>å£°æ˜æŸ¥è¯¢æ“ä½œ</p><ul><li><p>idå±æ€§ï¼Œ æŒ‡å®šç»‘å®šæ–¹æ³•çš„æ–¹æ³•å</p></li><li><p>parameterTypeå±æ€§ï¼Œè®¾ç½®å‚æ•°ç±»å‹</p></li><li><p>resultTypeå±æ€§ï¼ŒæŒ‡å®šå½“å‰sqlè¿”å›æ•°æ®å°è£…çš„å¯¹è±¡ç±»å‹ï¼ˆå®ä½“ç±»ï¼‰</p></li><li><p>resultMapå±æ€§ï¼ŒæŒ‡å®šä»æ•°æ®è¡¨åˆ°å®ä½“ç±»çš„å­—æ®µå’Œå±æ€§çš„å¯¹åº”å…³ç³»</p></li><li><p>useCacheå±æ€§ï¼ŒæŒ‡å®šæ­¤æŸ¥è¯¢æ“ä½œæ˜¯å¦éœ€è¦ç¼“å­˜</p></li><li><p>timeoutå±æ€§ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´</p></li></ul></blockquote><h4 id="_9-7-resultmapæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-7-resultmapæ ‡ç­¾" aria-hidden="true">#</a> 9.7 resultMapæ ‡ç­¾</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- resultMapæ ‡ç­¾ç”¨äºå®šä¹‰å®ä½“ç±»ä¸æ•°æ®è¡¨çš„æ˜ å°„å…³ç³»ï¼ˆORMï¼‰ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stu_num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuNum<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stu_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuName<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stu_gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuGender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stu_age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stuAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-8-cacheæ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#_9-8-cacheæ ‡ç­¾" aria-hidden="true">#</a> 9.8 cacheæ ‡ç­¾</h4><blockquote><p>è®¾ç½®å½“å‰DAOè¿›è¡Œæ•°æ®åº“æ“ä½œæ—¶çš„ç¼“å­˜å±æ€§è®¾ç½®</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_9-9-sqlå’Œinclude" tabindex="-1"><a class="header-anchor" href="#_9-9-sqlå’Œinclude" aria-hidden="true">#</a> 9.9 sqlå’Œinclude</h4><blockquote><p>SQLç‰‡æ®µ</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wanglaoji<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>sid , stu_num , stu_name , stu_gender , stu_age<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>listStudents<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>studentMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wanglaoji<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> from tb_students
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åã€åˆ†é¡µæ’ä»¶" tabindex="-1"><a class="header-anchor" href="#åã€åˆ†é¡µæ’ä»¶" aria-hidden="true">#</a> åã€åˆ†é¡µæ’ä»¶</h2><blockquote><p>åˆ†é¡µæ’ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹äºMyBatisæ¡†æ¶ä¹‹å¤–çš„ç¬¬ä¸‰æ–¹æ’ä»¶;</p></blockquote><h4 id="_10-1-æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_10-1-æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–" aria-hidden="true">#</a> 10.1 æ·»åŠ åˆ†é¡µæ’ä»¶çš„ä¾èµ–</h4><blockquote><p>PageHelper</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code> <span class="token comment">&lt;!-- pagehelperåˆ†é¡µæ’ä»¶ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>pagehelper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10-2-é…ç½®æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_10-2-é…ç½®æ’ä»¶" aria-hidden="true">#</a> 10.2 é…ç½®æ’ä»¶</h4><blockquote><p>åœ¨mybatisçš„ä¸»é…ç½®æ–‡ä»¶<code>mybatis-config.xml</code>ä¸­é€šè¿‡<code>plugins</code>æ ‡ç­¾è¿›è¡Œé…ç½®</p></blockquote><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--pluginsæ ‡ç­¾ï¼Œç”¨äºé…ç½®MyBatisæ’ä»¶ï¼ˆåˆ†é¡µæ’ä»¶ï¼‰--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span> <span class="token attr-name">interceptor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.github.pagehelper.PageInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10-3-åˆ†é¡µå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_10-3-åˆ†é¡µå®ä¾‹" aria-hidden="true">#</a> 10.3 åˆ†é¡µå®ä¾‹</h4><blockquote><p>å¯¹å­¦ç”Ÿä¿¡æ¯è¿›è¡Œåˆ†é¡µæŸ¥è¯¢</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testListStudentsByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//sqlSession</span>
    <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">listStudents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> pageInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>students<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//pageInfoä¸­å°±åŒ…å«äº†æ•°æ®åŠåˆ†é¡µä¿¡æ¯</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¸¦æ¡ä»¶åˆ†é¡µ</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testListStudentsByPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StudentDAO</span> studentDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">StudentDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//sqlSession</span>
    <span class="token class-name">PageHelper</span><span class="token punctuation">.</span><span class="token function">startPage</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//List&lt;Student&gt; students = studentDAO.listStudents();</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> studentDAO<span class="token punctuation">.</span><span class="token function">listStudentsByGender</span><span class="token punctuation">(</span><span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> pageInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PageInfo</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//pageInfoä¸­å°±åŒ…å«äº†æ•°æ®åŠåˆ†é¡µä¿¡æ¯</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åä¸€ã€å…³è”æ˜ å°„" tabindex="-1"><a class="header-anchor" href="#åä¸€ã€å…³è”æ˜ å°„" aria-hidden="true">#</a> åä¸€ã€å…³è”æ˜ å°„</h2><h4 id="_11-1-å®ä½“å…³ç³»" tabindex="-1"><a class="header-anchor" href="#_11-1-å®ä½“å…³ç³»" aria-hidden="true">#</a> 11.1 å®ä½“å…³ç³»</h4><blockquote><p>å®ä½“â€”â€”æ•°æ®å®ä½“ï¼Œå®ä½“å…³ç³»æŒ‡çš„å°±æ˜¯æ•°æ®ä¸æ•°æ®ä¹‹é—´çš„å…³ç³»</p><p>ä¾‹å¦‚ï¼šç”¨æˆ·å’Œè§’è‰²ã€æˆ¿å±‹å’Œæ¥¼æ ‹ã€è®¢å•å’Œå•†å“</p></blockquote><p>å®ä½“å…³ç³»åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š</p><p><strong>ä¸€å¯¹ä¸€å…³è”</strong></p><p>å®ä¾‹ï¼šäººå’Œèº«ä»½è¯ã€å­¦ç”Ÿå’Œå­¦ç”Ÿè¯ã€ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œè¯¦æƒ…</p><p>æ•°æ®è¡¨å…³ç³»ï¼š</p><ul><li><p>ä¸»é”®å…³è”ï¼ˆç”¨æˆ·è¡¨ä¸»é”® å’Œè¯¦æƒ…ä¸»é”®ç›¸åŒæ—¶ï¼Œè¡¨ç¤ºæ˜¯åŒ¹é…çš„æ•°æ®ï¼‰</p><figure><img src="https://gaofee.cc/images/202303171047348.png" alt="1616550990633" tabindex="0" loading="lazy"><figcaption>1616550990633</figcaption></figure></li><li><p>å”¯ä¸€å¤–é”®å…³è”</p><figure><img src="https://gaofee.cc/images/202303171047349.png" alt="1616551159843" tabindex="0" loading="lazy"><figcaption>1616551159843</figcaption></figure></li></ul><p><strong>ä¸€å¯¹å¤šå…³è”</strong>ã€<strong>å¤šå¯¹ä¸€å…³è”</strong></p><p>å®ä¾‹ï¼š</p><ul><li>ä¸€å¯¹å¤šï¼š ç­çº§å’Œå­¦ç”Ÿ ã€ ç±»åˆ«å’Œå•†å“ã€æ¥¼æ ‹å’Œæˆ¿å±‹</li><li>å¤šå¯¹ä¸€ï¼šå­¦ç”Ÿå’Œç­çº§ ã€ å•†å“å’Œç±»åˆ«</li></ul><p>æ•°æ®è¡¨å…³ç³»ï¼š</p><ul><li>åœ¨å¤šçš„ä¸€ç«¯æ·»åŠ å¤–é”®å’Œä¸€çš„ä¸€æ®µè¿›è¡Œå…³è”</li></ul><p><strong>å¤šå¯¹å¤šå…³è”</strong></p><p>å®ä¾‹ï¼šç”¨æˆ·å’Œè§’è‰²ã€è§’è‰²å’Œæƒé™ã€æˆ¿å±‹å’Œä¸šä¸»ã€å­¦ç”Ÿå’Œç¤¾å›¢ã€è®¢å•å’Œå•†å“</p><p>æ•°æ®è¡¨å…³ç³»ï¼šå»ºç«‹ç¬¬ä¸‰å¼ å…³ç³»è¡¨æ·»åŠ ä¸¤ä¸ªå¤–é”®åˆ†åˆ«ä¸ä¸¤å¼ è¡¨ä¸»é”®è¿›è¡Œå…³è”</p><p>ç”¨æˆ·(user_id) ç”¨æˆ·è§’è‰²è¡¨(uid,rid) è§’è‰²(role_id)</p><h4 id="_11-2-åˆ›å»ºé¡¹ç›®-éƒ¨ç½²mybatisæ¡†æ¶" tabindex="-1"><a class="header-anchor" href="#_11-2-åˆ›å»ºé¡¹ç›®-éƒ¨ç½²mybatisæ¡†æ¶" aria-hidden="true">#</a> 11.2 åˆ›å»ºé¡¹ç›®ï¼Œéƒ¨ç½²MyBatisæ¡†æ¶</h4><ul><li><p>åˆ›å»ºwebé¡¹ç›®ï¼ˆmavenï¼‰</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- æ·»åŠ webä¾èµ– --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>éƒ¨ç½²MyBatisæ¡†æ¶</p><ul><li>æ·»åŠ ä¾èµ–</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é…ç½®æ–‡ä»¶</li><li>å¸®åŠ©ç±»</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisUtil</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> factory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlSession</span><span class="token punctuation">&gt;</span></span> local <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocal</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SqlSession</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isAutoCommit<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> local<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sqlSession <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            sqlSession <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span>isAutoCommit<span class="token punctuation">)</span><span class="token punctuation">;</span>
            local<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>sqlSession<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span> <span class="token keyword">extends</span>  <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token class-name">T</span> <span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_11-3-ä¸€å¯¹ä¸€å…³è”" tabindex="-1"><a class="header-anchor" href="#_11-3-ä¸€å¯¹ä¸€å…³è”" aria-hidden="true">#</a> 11.3 ä¸€å¯¹ä¸€å…³è”</h4><blockquote><p>å®ä¾‹ï¼šç”¨æˆ·---è¯¦æƒ…</p></blockquote><h6 id="_11-3-1-åˆ›å»ºæ•°æ®è¡¨" tabindex="-1"><a class="header-anchor" href="#_11-3-1-åˆ›å»ºæ•°æ®è¡¨" aria-hidden="true">#</a> 11.3.1 åˆ›å»ºæ•°æ®è¡¨</h6><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- ç”¨æˆ·ä¿¡æ¯è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> users<span class="token punctuation">(</span>
    user_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    user_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    user_pwd <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    user_realname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    user_img <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- ç”¨æˆ·è¯¦æƒ…è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> details<span class="token punctuation">(</span>
	detail_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    user_addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    user_tel <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    user_desc <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	uid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span>
    <span class="token comment">-- constraint FK_USER foreign key(uid) references users(user_id)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_11-3-2-åˆ›å»ºå®ä½“ç±»" tabindex="-1"><a class="header-anchor" href="#_11-3-2-åˆ›å»ºå®ä½“ç±»" aria-hidden="true">#</a> 11.3.2 åˆ›å»ºå®ä½“ç±»</h6><ul><li><p>User</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> userId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userPwd<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userRealname<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userImg<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Detail</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Detail</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> detailId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userAddr<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userTel<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> userDesc<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> userId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h6 id="_11-3-3-æ·»åŠ æ“ä½œ-äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_11-3-3-æ·»åŠ æ“ä½œ-äº‹åŠ¡" aria-hidden="true">#</a> 11.3.3 æ·»åŠ æ“ä½œï¼ˆäº‹åŠ¡ï¼‰</h6><table><thead><tr><th>æµ‹è¯•ä»£ç </th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047350.png" alt="1616558872585" loading="lazy"></td></tr></tbody></table><h6 id="_11-3-4-ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_11-3-4-ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢" aria-hidden="true">#</a> 11.3.4 ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢</h6><blockquote><p>åœ¨æŸ¥è¯¢ç”¨æˆ·çš„åŒæ—¶å…³è”æŸ¥è¯¢å‡ºä¸ä¹‹å¯¹åº”çš„è¯¦æƒ…</p></blockquote><p><strong>å®ä½“</strong></p><table><thead><tr><th>User</th><th>Detail</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047351.png" alt="1616557527886" loading="lazy"></td><td><img src="https://gaofee.cc/images/202303171047352.png" alt="1616557509389" loading="lazy"></td></tr></tbody></table><p><strong>æ˜ å°„æ–‡ä»¶</strong></p><table><thead><tr><th>è¿æ¥æŸ¥è¯¢</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047353.png" alt="1616558061073" loading="lazy"></td></tr></tbody></table><table><thead><tr><th>å­æŸ¥è¯¢</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047354.png" alt="1616558696902" loading="lazy"></td></tr><tr><td><img src="https://gaofee.cc/images/202303171047355.png" alt="1616558739190" loading="lazy"></td></tr></tbody></table><h4 id="_11-4-ä¸€å¯¹å¤šå…³è”" tabindex="-1"><a class="header-anchor" href="#_11-4-ä¸€å¯¹å¤šå…³è”" aria-hidden="true">#</a> 11.4 ä¸€å¯¹å¤šå…³è”</h4><blockquote><p>æ¡ˆä¾‹ï¼šç­çº§(1)â€”å­¦ç”Ÿ(n)</p></blockquote><h6 id="_11-4-1-åˆ›å»ºæ•°æ®è¡¨" tabindex="-1"><a class="header-anchor" href="#_11-4-1-åˆ›å»ºæ•°æ®è¡¨" aria-hidden="true">#</a> 11.4.1 åˆ›å»ºæ•°æ®è¡¨</h6><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- åˆ›å»ºç­çº§ä¿¡æ¯è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> classes<span class="token punctuation">(</span>
    cid <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    cname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    cdesc <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- åˆ›å»ºå­¦ç”Ÿä¿¡æ¯è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> students<span class="token punctuation">(</span>
    sid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    sage <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    scid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_11-4-2-åˆ›å»ºå®ä½“ç±»" tabindex="-1"><a class="header-anchor" href="#_11-4-2-åˆ›å»ºå®ä½“ç±»" aria-hidden="true">#</a> 11.4.2 åˆ›å»ºå®ä½“ç±»</h6><table><thead><tr><th>Clazz</th><th>Student</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047356.png" alt="1616566868757" loading="lazy"></td><td><img src="https://gaofee.cc/images/202303171047357.png" alt="1616566709567" loading="lazy"></td></tr></tbody></table><h6 id="_11-4-3-å…³è”æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_11-4-3-å…³è”æŸ¥è¯¢" aria-hidden="true">#</a> 11.4.3 å…³è”æŸ¥è¯¢</h6><blockquote><p>å½“æŸ¥è¯¢ä¸€ä¸ªç­çº§çš„æ—¶å€™ï¼Œ è¦å…³è”æŸ¥è¯¢å‡ºè¿™ä¸ªç­çº§ä¸‹çš„æ‰€æœ‰å­¦ç”Ÿ</p></blockquote><p><strong>è¿æ¥æŸ¥è¯¢</strong></p><table><thead><tr><th>è¿æ¥æŸ¥è¯¢æ˜ å°„é…ç½®</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047358.png" alt="1616567949549" loading="lazy"></td></tr></tbody></table><p><strong>å­æŸ¥è¯¢</strong></p><table><thead><tr><th>å­æŸ¥è¯¢æ˜ å°„é…ç½®</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047359.png" alt="1616568410749" loading="lazy"></td></tr><tr><td><img src="https://gaofee.cc/images/202303171047360.png" alt="1616568443022" loading="lazy"></td></tr></tbody></table><h4 id="_11-5-å¤šå¯¹ä¸€å…³è”" tabindex="-1"><a class="header-anchor" href="#_11-5-å¤šå¯¹ä¸€å…³è”" aria-hidden="true">#</a> 11.5 å¤šå¯¹ä¸€å…³è”</h4><blockquote><p>å®ä¾‹ï¼šå­¦ç”Ÿ(n)â€”ç­çº§(1)</p><p>å½“æŸ¥è¯¢ä¸€ä¸ªå­¦ç”Ÿçš„æ—¶å€™ï¼Œå…³è”æŸ¥è¯¢è¿™ä¸ªå­¦ç”Ÿæ‰€åœ¨çš„ç­çº§ä¿¡æ¯</p></blockquote><h6 id="_11-5-1-åˆ›å»ºå®ä½“ç±»" tabindex="-1"><a class="header-anchor" href="#_11-5-1-åˆ›å»ºå®ä½“ç±»" aria-hidden="true">#</a> 11.5.1 åˆ›å»ºå®ä½“ç±»</h6><table><thead><tr><th>Student</th><th>Clazz</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047361.png" alt="1616568763050" loading="lazy"></td><td><img src="https://gaofee.cc/images/202303171047362.png" alt="1616568809974" loading="lazy"></td></tr></tbody></table><h6 id="_11-5-2-å…³è”æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_11-5-2-å…³è”æŸ¥è¯¢" aria-hidden="true">#</a> 11.5.2 å…³è”æŸ¥è¯¢</h6><p><strong>è¿æ¥æŸ¥è¯¢</strong></p><table><thead><tr><th>è¿æ¥æŸ¥è¯¢æ˜ å°„é…ç½®</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047363.png" alt="1616569488794" loading="lazy"></td></tr></tbody></table><p><strong>å­æŸ¥è¯¢</strong></p><table><thead><tr><th>å­æŸ¥è¯¢æ˜ å°„é…ç½®</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047364.png" alt="1616569897430" loading="lazy"></td></tr><tr><td><img src="https://gaofee.cc/images/202303171047365.png" alt="1616569932235" loading="lazy"></td></tr></tbody></table><h4 id="_11-6-å¤šå¯¹å¤šå…³è”" tabindex="-1"><a class="header-anchor" href="#_11-6-å¤šå¯¹å¤šå…³è”" aria-hidden="true">#</a> 11.6 å¤šå¯¹å¤šå…³è”</h4><blockquote><p>æ¡ˆä¾‹ï¼šå­¦ç”Ÿï¼ˆmï¼‰â€”è¯¾ç¨‹ï¼ˆnï¼‰</p></blockquote><h6 id="_11-6-1-åˆ›å»ºæ•°æ®è¡¨" tabindex="-1"><a class="header-anchor" href="#_11-6-1-åˆ›å»ºæ•°æ®è¡¨" aria-hidden="true">#</a> 11.6.1 åˆ›å»ºæ•°æ®è¡¨</h6><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- å­¦ç”Ÿä¿¡æ¯è¡¨ï¼ˆå¦‚ä¸Šï¼‰</span>
<span class="token comment">-- è¯¾ç¨‹ä¿¡æ¯è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> courses<span class="token punctuation">(</span>
    course_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    course_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- é€‰è¯¾ä¿¡æ¯è¡¨/æˆç»©è¡¨(å­¦å·ã€è¯¾ç¨‹å·ã€æˆç»©)</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> grades<span class="token punctuation">(</span>
    sid <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    cid <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    score <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_11-6-2-å…³è”æŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#_11-6-2-å…³è”æŸ¥è¯¢" aria-hidden="true">#</a> 11.6.2 å…³è”æŸ¥è¯¢</h6><blockquote><p>æŸ¥è¯¢å­¦ç”Ÿæ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢å­¦ç”Ÿé€‰æ‹©çš„è¯¾ç¨‹</p></blockquote><table><thead><tr><th>Student</th><th>Course</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047366.png" alt="1616577612042" loading="lazy"></td><td><img src="https://gaofee.cc/images/202303171047367.png" alt="1616577631853" loading="lazy"></td></tr></tbody></table><blockquote><p>æ ¹æ®è¯¾ç¨‹ç¼–å·æŸ¥è¯¢è¯¾ç¨‹æ—¶ï¼ŒåŒæ—¶æŸ¥è¯¢é€‰æ‹©äº†è¿™é—¨è¯¾ç¨‹çš„å­¦ç”Ÿ</p></blockquote><table><thead><tr><th>Student</th><th>Course</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047368.png" alt="1616577675018" loading="lazy"></td><td><img src="https://gaofee.cc/images/202303171047369.png" alt="1616577785188" loading="lazy"></td></tr></tbody></table><table><thead><tr><th>è¿æ¥æŸ¥è¯¢æ˜ å°„é…ç½®</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047370.png" alt="1616578573302" loading="lazy"></td></tr></tbody></table><table><thead><tr><th>å­æŸ¥è¯¢æ˜ å°„é…ç½®</th></tr></thead><tbody><tr><td><img src="https://gaofee.cc/images/202303171047371.png" alt="1616579097777" loading="lazy"></td></tr><tr><td><img src="https://gaofee.cc/images/202303171047372.png" alt="1616579157655" loading="lazy"></td></tr></tbody></table><h2 id="åäºŒã€åŠ¨æ€sql" tabindex="-1"><a class="header-anchor" href="#åäºŒã€åŠ¨æ€sql" aria-hidden="true">#</a> åäºŒã€åŠ¨æ€SQL</h2><blockquote><p>äº¤å‹ç½‘ï¼šççˆ±ç½‘ã€ç™¾åˆç½‘ ç­›é€‰å¿ƒä»ªå¯¹è±¡ æ€§åˆ« å¹´é¾„ åŸå¸‚ èº«é«˜</p><p>ç”µå•†ï¼šæ·˜å®ã€äº¬ä¸œ ç­›é€‰å•†å“ ç¾½æ¯›çƒæ‹ å“ç‰Œ ä»·æ ¼</p></blockquote><p>â€‹ æ–¹æ±Ÿé¹ æ€§åˆ« å¥³ select * from members where gender=&#39;å¥³&#39;</p><p>â€‹ ç½—å½ª æ€§åˆ« å¥³ å¹´é¾„ 18-23 select * from members where gender=&#39;å¥³&#39; and age &gt;=18 and age &lt;=23</p><p>â€‹ å¼ ä¸‰ å¹´é¾„ åŸå¸‚ select * from members where age &gt;=18 and age &lt;=23 and city=&#39;&#39;</p><blockquote><p>ç”¨æˆ·çš„ç­›é€‰æ¡ä»¶ä¸åŒï¼Œæˆ‘ä»¬å®Œæˆç­›é€‰æ‰§è¡Œçš„SQLä¹Ÿä¸ä¸€æ ·ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡ç©·ä¸¾æ¥ä¸€ä¸€çš„å®Œæˆä¸åŒæ¡ä»¶çš„ç­›é€‰ï¼Œä½†æ˜¯è¿™ç§å®ç°æ€è·¯è¿‡äºç¹çå’Œå¤æ‚ï¼ŒMyBatiså°±æä¾›äº†åŠ¨æ€SQLçš„é…ç½®æ–¹å¼æ¥å®ç°å¤šæ¡ä»¶æŸ¥è¯¢ã€‚</p></blockquote><h4 id="_12-1-ä»€ä¹ˆæ˜¯åŠ¨æ€sql" tabindex="-1"><a class="header-anchor" href="#_12-1-ä»€ä¹ˆæ˜¯åŠ¨æ€sql" aria-hidden="true">#</a> 12.1 ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼Ÿ</h4><blockquote><p>æ ¹æ®æŸ¥è¯¢æ¡ä»¶åŠ¨æ€å®ŒæˆSQLçš„æ‹¼æ¥</p></blockquote><h4 id="_12-2-åŠ¨æ€sqlä½¿ç”¨æ¡ˆä¾‹" tabindex="-1"><a class="header-anchor" href="#_12-2-åŠ¨æ€sqlä½¿ç”¨æ¡ˆä¾‹" aria-hidden="true">#</a> 12.2 åŠ¨æ€SQLä½¿ç”¨æ¡ˆä¾‹</h4><blockquote><p>æ¡ˆä¾‹ï¼šå¿ƒä»ªå¯¹è±¡æœç´¢</p></blockquote><h6 id="_12-2-1-åˆ›å»ºæ•°æ®è¡¨" tabindex="-1"><a class="header-anchor" href="#_12-2-1-åˆ›å»ºæ•°æ®è¡¨" aria-hidden="true">#</a> 12.2.1 åˆ›å»ºæ•°æ®è¡¨</h6><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> members<span class="token punctuation">(</span>
    member_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    member_nick <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">unique</span><span class="token punctuation">,</span>
    member_gender <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    member_age <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    member_city <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_12-2-2-åˆ›å»ºå®ä½“ç±»" tabindex="-1"><a class="header-anchor" href="#_12-2-2-åˆ›å»ºå®ä½“ç±»" aria-hidden="true">#</a> 12.2.2 åˆ›å»ºå®ä½“ç±»</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Member</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> memberId<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memberNick<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memberGender<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> memberAge<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memberCity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_12-2-3-åˆ›å»ºdaoæ¥å£" tabindex="-1"><a class="header-anchor" href="#_12-2-3-åˆ›å»ºdaoæ¥å£" aria-hidden="true">#</a> 12.2.3 åˆ›å»ºDAOæ¥å£</h6><blockquote><p>åœ¨DAOæ¥å£ä¸­å®šä¹‰ä¸€ä¸ªå¤šæ¡ä»¶æŸ¥è¯¢çš„æ–¹æ³•</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MemberDAO</span> <span class="token punctuation">{</span>

    <span class="token comment">//åœ¨å¤šæ¡ä»¶æŸ¥è¯¢ä¸­ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ä¸ç¡®å®šï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨HashMapä½œä¸ºå‚æ•°</span>
    <span class="token comment">//ä¼˜ç‚¹ï¼šæ— éœ€å•ç‹¬å®šä¹‰ä¼ é€’æŸ¥è¯¢æ¡ä»¶çš„ç±»</span>
    <span class="token comment">//ç¼ºç‚¹ï¼šå½“å‘Mapä¸­å­˜æ”¾å‚æ•°æ—¶ï¼Œkeyå¿…é¡»ä¸åŠ¨æ€sqlä¿æŒä¸€è‡´ï¼ˆï¼‰</span>
    <span class="token comment">//public List&lt;Member&gt; searchMember(HashMap&lt;String,Object&gt; params);</span>

    <span class="token comment">// ä¹Ÿå¯ä»¥å®šä¹‰ä¸“é—¨ç”¨äºå­˜æ”¾æŸ¥è¯¢æ¡ä»¶çš„å®ä½“ç±»å­˜æ”¾å‚æ•°</span>
    <span class="token comment">//ä¼˜ç‚¹ï¼šè®¾ç½®å‚æ•°æ—¶æ— éœ€å…³æ³¨å±æ€§å</span>
    <span class="token comment">//ç¼ºç‚¹ï¼šéœ€è¦å•ç‹¬å®šä¹‰ä¸€ä¸ªç±»æ¥å°è£…å‚æ•°</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchMember</span><span class="token punctuation">(</span><span class="token class-name">MemberSearchCondition</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-3-if" tabindex="-1"><a class="header-anchor" href="#_12-3-if" aria-hidden="true">#</a> 12.3 if</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Member<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member_nick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberNick<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member_gender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberGender<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member_age<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberAge<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>member_city<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberCity<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchMember<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select member_id,member_nick,member_gender,member_age,member_city
    from members
    where 1=1
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--gender å°±æ˜¯å‚æ•°å¯¹è±¡çš„å±æ€§/å‚æ•°Mapçš„key--&gt;</span>
        and member_gender=#{gender}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minAge != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and member_age <span class="token entity named-entity" title="&gt;">&amp;gt;</span>= #{minAge}   <span class="token comment">&lt;!-- &amp;gt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxAge != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and member_age <span class="token entity named-entity" title="&lt;">&amp;lt;</span>= #{maxAge}  <span class="token comment">&lt;!-- &amp;lt; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>city != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and member_city = #{city}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;minAge&quot;</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//params.put(&quot;maxAge&quot;,23);</span>
    params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;city&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;æ­¦æ±‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//-----------------------------------------------------------------------</span>
    <span class="token class-name">MemberSearchCondition</span> params2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemberSearchCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    params2<span class="token punctuation">.</span><span class="token function">setGender</span><span class="token punctuation">(</span><span class="token string">&quot;å¥³&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//params2.setMinAge(21);</span>
    <span class="token comment">//params2.setMaxAge(30);</span>
    <span class="token comment">//params2.setCity(&quot;æ­¦æ±‰&quot;);</span>

    <span class="token comment">//==========================================================================</span>

    <span class="token class-name">MemberDAO</span> memberDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> members <span class="token operator">=</span> memberDAO<span class="token punctuation">.</span><span class="token function">searchMember</span><span class="token punctuation">(</span>params2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Member</span> m<span class="token operator">:</span> members<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-4-where" tabindex="-1"><a class="header-anchor" href="#_12-4-where" aria-hidden="true">#</a> 12.4 where</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchMember<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select member_id,member_nick,member_gender,member_age,member_city
    from members
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--gender å°±æ˜¯å‚æ•°å¯¹è±¡çš„å±æ€§/å‚æ•°Mapçš„key--&gt;</span>
            and member_gender=#{gender}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minAge != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and member_age <span class="token entity named-entity" title="&gt;">&amp;gt;</span>= #{minAge}   <span class="token comment">&lt;!-- &amp;gt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxAge != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and member_age <span class="token entity named-entity" title="&lt;">&amp;lt;</span>= #{maxAge}  <span class="token comment">&lt;!-- &amp;lt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>city != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and member_city = #{city}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
    order by member_age
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-5-trim" tabindex="-1"><a class="header-anchor" href="#_12-5-trim" aria-hidden="true">#</a> 12.5 <strong>trim</strong></h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchMember<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select member_id,member_nick,member_gender,member_age,member_city
    from members
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trim</span> <span class="token attr-name">prefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>where<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prefixOverrides</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>and | or<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suffix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>order by member_age<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!--gender å°±æ˜¯å‚æ•°å¯¹è±¡çš„å±æ€§/å‚æ•°Mapçš„key--&gt;</span>
            and member_gender=#{gender}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minAge != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and member_age <span class="token entity named-entity" title="&gt;">&amp;gt;</span>= #{minAge}   <span class="token comment">&lt;!-- &amp;gt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxAge != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and member_age <span class="token entity named-entity" title="&lt;">&amp;lt;</span>= #{maxAge}  <span class="token comment">&lt;!-- &amp;lt; --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>city != null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and member_city = #{city}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trim</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_12-6-foreach" tabindex="-1"><a class="header-anchor" href="#_12-6-foreach" aria-hidden="true">#</a> 12.6 <strong>foreach</strong></h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MemberDAO</span> <span class="token punctuation">{</span>
    <span class="token comment">//æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„ä¼šå‘˜</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchMemberByCity</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cities<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchMemberByCity<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select member_id,member_nick,member_gender,member_age,member_city
    from members where member_city in
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cityName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        #{cityName}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æµ‹è¯•</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code> <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">searchMemberByCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> cities <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;å¦é—¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;å®œæ˜Œ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MemberDAO</span> memberDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> members <span class="token operator">=</span> memberDAO<span class="token punctuation">.</span><span class="token function">searchMemberByCity</span><span class="token punctuation">(</span>cities<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Member</span> m<span class="token operator">:</span> members<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢" tabindex="-1"><a class="header-anchor" href="#åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢" aria-hidden="true">#</a> åä¸‰ã€æ¨¡ç³ŠæŸ¥è¯¢</h2><blockquote><p>æ¡ˆä¾‹ï¼šæ ¹æ®æ˜µç§°æŸ¥è¯¢ä¼šå‘˜ä¿¡æ¯ï¼ˆæ¨¡ç³ŠåŒ¹é… likeï¼‰</p></blockquote><h4 id="_13-1-æ¨¡ç³ŠæŸ¥è¯¢å®ç°" tabindex="-1"><a class="header-anchor" href="#_13-1-æ¨¡ç³ŠæŸ¥è¯¢å®ç°" aria-hidden="true">#</a> 13.1 æ¨¡ç³ŠæŸ¥è¯¢å®ç°</h4><h6 id="_13-1-1-dao" tabindex="-1"><a class="header-anchor" href="#_13-1-1-dao" aria-hidden="true">#</a> 13.1.1 DAO</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MemberDAO</span> <span class="token punctuation">{</span>

    <span class="token comment">//æ ¹æ®æ˜µç§°æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯â€”â€”æ¨¡ç³ŠæŸ¥è¯¢</span>
    <span class="token comment">// æ¨¡ç³ŠæŸ¥è¯¢éœ€è¦ä½¿ç”¨${}å–å€¼ï¼Œä¸sqlè¿›è¡Œæ‹¼æ¥</span>
    <span class="token comment">// åœ¨ä½¿ç”¨${}æ—¶ï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªå‚æ•°ä¹Ÿéœ€è¦ä½¿ç”¨@Paramæ³¨è§£å£°æ˜å‚æ•°çš„keyï¼ˆéStringå¯¹è±¡å‚æ•°å¯ä»¥ä¸ç”¨å£°æ˜ï¼‰</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchMemberByNick</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;keyWord&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> keyWord<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_13-1-2-æ˜ å°„æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_13-1-2-æ˜ å°„æ–‡ä»¶" aria-hidden="true">#</a> 13.1.2 æ˜ å°„æ–‡ä»¶</h6><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--å¦‚æœå‚æ•°æ—¶Stringç±»å‹ï¼Œéœ€è¦parameterTypeå£°æ˜å‚æ•°ç±»å‹--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchMemberByNick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select member_id,member_nick,member_gender,member_age,member_city
    from members
    where member_nick like &#39;%${keyWord}%&#39;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_13-1-3-æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#_13-1-3-æµ‹è¯•" aria-hidden="true">#</a> 13.1.3 æµ‹è¯•</h6><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSearchMemberByNick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">MemberDAO</span> memberDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Member</span><span class="token punctuation">&gt;</span></span> members <span class="token operator">=</span> memberDAO<span class="token punctuation">.</span><span class="token function">searchMemberByNick</span><span class="token punctuation">(</span><span class="token string">&quot;èŠ±&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Member</span> m<span class="token operator">:</span> members<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_13-2-å’Œ-çš„åŒºåˆ«" tabindex="-1"><a class="header-anchor" href="#_13-2-å’Œ-çš„åŒºåˆ«" aria-hidden="true">#</a> 13.2 #{}å’Œ${}çš„åŒºåˆ«</h4><ul><li>${key} è¡¨ç¤ºè·å–å‚æ•°ï¼Œå…ˆè·å–å‚æ•°çš„å€¼æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­ï¼Œå†ç¼–è¯‘æ‰§è¡ŒSQLè¯­å¥;å¯èƒ½å¼•èµ·SQLæ³¨å…¥é—®é¢˜</li><li>#{key} è¡¨ç¤ºè·å–å‚æ•°ï¼Œå…ˆå®ŒæˆSQLç¼–è¯‘(é¢„ç¼–è¯‘)ï¼Œé¢„ç¼–è¯‘ä¹‹åå†å°†è·å–çš„å‚æ•°è®¾ç½®åˆ°SQLä¸ä¸­ ï¼Œå¯ä»¥é¿å…SQLæ³¨å…¥é—®é¢˜</li></ul><h2 id="åå››ã€mybatisæ—¥å¿—é…ç½®" tabindex="-1"><a class="header-anchor" href="#åå››ã€mybatisæ—¥å¿—é…ç½®" aria-hidden="true">#</a> åå››ã€MyBatisæ—¥å¿—é…ç½®</h2><blockquote><p>MyBatisåšä¸ºä¸€ä¸ªå°è£…å¥½çš„ORMæ¡†æ¶ï¼Œå…¶è¿è¡Œè¿‡ç¨‹æˆ‘ä»¬æ²¡åŠæ³•è·Ÿè¸ªï¼Œä¸ºäº†è®©å¼€å‘è€…äº†è§£MyBatisæ‰§è¡Œæµç¨‹åŠæ¯ä¸ªæ‰§è¡Œæ­¥éª¤æ‰€å®Œæˆçš„å·¥ä½œï¼ŒMyBatisæ¡†æ¶æœ¬èº«æ”¯æŒlog4jæ—¥å¿—æ¡†æ¶ï¼Œå¯¹è¿è¡Œçš„è¿‡ç¨‹è¿›è¡Œè·Ÿè¸ªè®°å½•ã€‚æˆ‘ä»¬åªéœ€å¯¹MyBatisè¿›è¡Œç›¸å…³çš„æ—¥å¿—é…ç½®ï¼Œå°±å¯ä»¥çœ‹åˆ°MyBatisè¿è¡Œè¿‡ç¨‹ä¸­çš„æ—¥å¿—ä¿¡æ¯ã€‚</p></blockquote><h4 id="_14-1-æ·»åŠ æ—¥å¿—æ¡†æ¶ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_14-1-æ·»åŠ æ—¥å¿—æ¡†æ¶ä¾èµ–" aria-hidden="true">#</a> 14.1 æ·»åŠ æ—¥å¿—æ¡†æ¶ä¾èµ–</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-2-æ·»åŠ æ—¥å¿—é…ç½®æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_14-2-æ·»åŠ æ—¥å¿—é…ç½®æ–‡ä»¶" aria-hidden="true">#</a> 14.2 æ·»åŠ æ—¥å¿—é…ç½®æ–‡ä»¶</h4><ul><li>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºåä¸º <code>log4j.properties</code>æ–‡ä»¶</li><li>åœ¨ <code>log4j.properties</code>æ–‡ä»¶é…ç½®æ—¥å¿—è¾“å‡ºçš„æ–¹å¼</li></ul><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># å£°æ˜æ—¥å¿—çš„è¾“å‡ºçº§åˆ«åŠè¾“å‡ºæ–¹å¼</span>
<span class="token key attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG,stdout</span>
<span class="token comment"># MyBatis logging configuration...</span>
<span class="token key attr-name">log4j.logger.org.mybatis.example.BlogMapper</span><span class="token punctuation">=</span><span class="token value attr-value">TRACE</span>
<span class="token comment"># Console output...</span>
<span class="token key attr-name">log4j.appender.stdout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token key attr-name">log4j.appender.stdout.layout</span><span class="token punctuation">=</span><span class="token value attr-value">org.apache.log4j.PatternLayout</span>
<span class="token comment"># å®šä¹‰æ—¥å¿—çš„æ‰“å°æ ¼å¼  %t è¡¨ç¤ºçº¿ç¨‹åç§°  %5p æ—¥å¿—çº§åˆ« %msgæ—¥å¿—ä¿¡æ¯</span>
<span class="token key attr-name">log4j.appender.stdout.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token value attr-value">[%t] %5p - %msg \:%m%n</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_14-3-æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«" tabindex="-1"><a class="header-anchor" href="#_14-3-æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«" aria-hidden="true">#</a> 14.3 æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«</h4><blockquote><p>åœ¨ä½¿ç”¨æ—¥å¿—æ¡†æ¶è¾“å‡ºæ—¥å¿—ä¿¡æ¯çš„æ—¶å€™ï¼Œä¼šæ ¹æ®è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯çš„é‡è¦ç¨‹åº¦åˆ†ä¸º5ä¸ªçº§åˆ«</p></blockquote><table><thead><tr><th>çº§åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DEBUG</td><td>è¾“å‡ºè°ƒè¯•ä¿¡æ¯</td></tr><tr><td>INFO</td><td>è¾“å‡ºæç¤ºä¿¡æ¯</td></tr><tr><td>WARN</td><td>è¾“å‡ºè­¦å‘Šä¿¡æ¯</td></tr><tr><td>ERROR</td><td>ä¸€èˆ¬æ€§é”™è¯¯ä¿¡æ¯</td></tr><tr><td>FATAL</td><td>è‡´å‘½æ€§é”™è¯¯ä¿¡æ¯</td></tr></tbody></table><h2 id="åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆdruid" tabindex="-1"><a class="header-anchor" href="#åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆdruid" aria-hidden="true">#</a> åäº”ã€é…ç½®æ•°æ®åº“è¿æ¥æ± -æ•´åˆDruid</h2><blockquote><p>MyBatisåšä¸ºä¸€ä¸ªORMæ¡†æ¶ï¼Œåœ¨è¿›è¡Œæ•°æ®åº“æ“ä½œæ—¶æ˜¯éœ€è¦å’Œæ•°æ®åº“è¿æ¥è¿æ¥çš„ï¼ŒMyBatisæ”¯æŒåŸºäºæ•°æ®åº“è¿æ¥æ± çš„è¿æ¥åˆ›å»ºæ–¹å¼ã€‚</p><p>å½“æˆ‘ä»¬é…ç½®MyBatisæ•°æ®æºæ—¶ï¼Œåªè¦é…ç½®äº†dataSourceæ ‡ç­¾çš„typeå±æ€§å€¼ä¸ºPOOLEDæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨MyBatiså†…ç½®çš„è¿æ¥æ± ç®¡ç†è¿æ¥ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ•°æ®åº“è¿æ¥æ± ï¼Œåˆ™éœ€è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚</p></blockquote><h4 id="_15-1-å¸¸è§çš„è¿æ¥æ± " tabindex="-1"><a class="header-anchor" href="#_15-1-å¸¸è§çš„è¿æ¥æ± " aria-hidden="true">#</a> 15.1 å¸¸è§çš„è¿æ¥æ± </h4><ul><li>DBCP</li><li>C3P0</li><li>Druid æ€§èƒ½ä¹Ÿæ¯”è¾ƒå¥½ï¼Œæä¾›äº†æ¯”è¾ƒä¾¿æ·çš„ç›‘æ§ç³»ç»Ÿ</li><li>Hikari æ€§èƒ½æœ€å¥½</li></ul><table><thead><tr><th>åŠŸèƒ½</th><th>dbcp</th><th>druid</th><th>c3p0</th><th>HikariCP</th></tr></thead><tbody><tr><td>æ˜¯å¦æ”¯æŒPSCache</td><td>æ˜¯</td><td>æ˜¯</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>ç›‘æ§</td><td>jmx</td><td>jmx/log/http</td><td>jmx,log</td><td>jmx</td></tr><tr><td>æ‰©å±•æ€§</td><td>å¼±</td><td>å¥½</td><td>å¼±</td><td>å¼±</td></tr><tr><td>sqlæ‹¦æˆªåŠè§£æ</td><td>æ— </td><td>æ”¯æŒ</td><td>æ— </td><td>æ— </td></tr><tr><td>ä»£ç </td><td>ç®€å•</td><td>ä¸­ç­‰</td><td>å¤æ‚</td><td>ç®€å•</td></tr><tr><td>æ›´æ–°æ—¶é—´</td><td>2015.8.6</td><td>2015.10.10</td><td>2015.12.09</td><td>2015.12.3</td></tr><tr><td>ç‰¹ç‚¹</td><td>ä¾èµ–äºcommon-pool</td><td>é˜¿é‡Œå¼€æºï¼ŒåŠŸèƒ½å…¨é¢</td><td>å†å²ä¹…è¿œï¼Œä»£ç é€»è¾‘å¤æ‚ï¼Œä¸”ä¸æ˜“ç»´æŠ¤</td><td>ä¼˜åŒ–åŠ›åº¦å¤§ï¼ŒåŠŸèƒ½ç®€å•ï¼Œèµ·æºäºboneCP</td></tr><tr><td>è¿æ¥æ± ç®¡ç†</td><td>LinkedBlockingDeque</td><td>æ•°ç»„</td><td></td><td>threadlocal+CopyOnWriteArrayList</td></tr></tbody></table><h4 id="_15-2-æ·»åŠ druidä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_15-2-æ·»åŠ druidä¾èµ–" aria-hidden="true">#</a> 15.2 æ·»åŠ Druidä¾èµ–</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-3-åˆ›å»ºdruidè¿æ¥æ± å·¥å‚" tabindex="-1"><a class="header-anchor" href="#_15-3-åˆ›å»ºdruidè¿æ¥æ± å·¥å‚" aria-hidden="true">#</a> 15.3 åˆ›å»ºDruidè¿æ¥æ± å·¥å‚</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DruidDataSourceFactory</span> <span class="token keyword">extends</span> <span class="token class-name">PooledDataSourceFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_15-4-å°†druiddatasourcefactoryé…ç½®ç»™mybatisæ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#_15-4-å°†druiddatasourcefactoryé…ç½®ç»™mybatisæ•°æ®æº" aria-hidden="true">#</a> 15.4 å°†DruidDataSourceFactoryé…ç½®ç»™MyBatisæ•°æ®æº</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mysql<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transactionManager</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--   POOLED ä½¿ç”¨MyBatiså†…ç½®çš„è¿æ¥æ± å®ç°   --&gt;</span>
        <span class="token comment">&lt;!--  mybatiséœ€è¦ä¸€ä¸ªè¿æ¥æ± å·¥å‚ï¼Œè¿™ä¸ªå·¥å‚å¯ä»¥äº§ç”Ÿæ•°æ®åº“è¿æ¥æ±   PooledDataSourceFactory --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.qfedu.utils.DruidDataSourceFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${driver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbcUrl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åå…­ã€mybatisç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#åå…­ã€mybatisç¼“å­˜" aria-hidden="true">#</a> åå…­ã€MyBatisç¼“å­˜</h2><blockquote><p>MyBatisæ˜¯åŸºäºJDBCçš„å°è£…ï¼Œä½¿æ•°æ®åº“æ“ä½œæ›´åŠ ä¾¿æ·ï¼›MyBatisé™¤äº†å¯¹JDBCæ“ä½œæ­¥éª¤è¿›è¡Œå°è£…ä¹‹å¤–ä¹Ÿå¯¹å…¶æ€§èƒ½è¿›è¡Œäº†ä¼˜åŒ–ï¼š</p><ul><li>åœ¨MyBatiså¼•å…¥ç¼“å­˜æœºåˆ¶ï¼Œç”¨äºæå‡MyBatisçš„æ£€ç´¢æ•ˆç‡</li><li>åœ¨MyBatiså¼•å…¥å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Œç”¨äºå‡å°‘å¯¹æ•°æ®åº“ä¸å¿…è¦çš„è®¿é—®</li></ul></blockquote><h4 id="_16-1-ç¼“å­˜çš„å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_16-1-ç¼“å­˜çš„å·¥ä½œåŸç†" aria-hidden="true">#</a> 16.1 ç¼“å­˜çš„å·¥ä½œåŸç†</h4><blockquote><p>ç¼“å­˜ï¼Œå°±æ˜¯å­˜å‚¨æ•°æ®çš„å†…å­˜</p></blockquote><figure><img src="https://gaofee.cc/images/202303171047373.png" alt="1616654926110" tabindex="0" loading="lazy"><figcaption>1616654926110</figcaption></figure><h4 id="_16-2-mybatisç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_16-2-mybatisç¼“å­˜" aria-hidden="true">#</a> 16.2 MyBatisç¼“å­˜</h4><blockquote><p>MyBatisç¼“å­˜åˆ†ä¸ºä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜</p></blockquote><h6 id="_16-2-1-ä¸€çº§ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_16-2-1-ä¸€çº§ç¼“å­˜" aria-hidden="true">#</a> 16.2.1 ä¸€çº§ç¼“å­˜</h6><blockquote><p>ä¸€çº§ç¼“å­˜ä¹Ÿå«åšSqlSessionçº§ç¼“å­˜ï¼Œä¸ºæ¯ä¸ªSqlSessionå•ç‹¬åˆ†é…çš„ç¼“å­˜å†…å­˜ï¼Œæ— éœ€æ‰‹åŠ¨å¼€å¯å¯ç›´æ¥ä½¿ç”¨ï¼›å¤šä¸ªSqlSessionçš„ç¼“å­˜æ˜¯ä¸å…±äº«çš„ã€‚</p><p>ç‰¹æ€§ï¼š</p><p>1.å¦‚æœå¤šæ¬¡æŸ¥è¯¢ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªSqlSessionå¯¹è±¡ï¼Œåˆ™ç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¹‹åæ•°æ®ä¼šå­˜æ”¾åˆ°ç¼“å­˜ï¼Œåç»­çš„æŸ¥è¯¢åˆ™ç›´æ¥è®¿é—®ç¼“å­˜ä¸­å­˜å‚¨çš„æ•°æ®ï¼›</p><p>2.å¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢å®Œæˆä¹‹åï¼Œå¯¹æŸ¥è¯¢å‡ºçš„å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼ˆæ­¤ä¿®æ”¹ä¼šå½±å“åˆ°ç¼“å­˜ï¼‰ï¼Œç¬¬äºŒæ¬¡æŸ¥è¯¢ä¼šç›´æ¥è®¿é—®ç¼“å­˜ï¼Œé€ æˆç¬¬äºŒæ¬¡æŸ¥è¯¢çš„ç»“æœä¸æ•°æ®åº“ä¸ä¸€è‡´ï¼›</p><p>3.å½“æˆ‘ä»¬è¿›è¡Œåœ¨æŸ¥è¯¢æ—¶æƒ³è¦è·³è¿‡ç¼“å­˜ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼Œåˆ™å¯ä»¥é€šè¿‡sqlSession.clearCache();æ¥æ¸…é™¤å½“å‰SqlSessionçš„ç¼“å­˜;</p><p>4.å¦‚æœç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¹‹åç¬¬äºŒæŸ¥è¯¢ä¹‹å‰ï¼Œä½¿ç”¨å½“å‰çš„sqlsessionæ‰§è¡Œäº†ä¿®æ”¹æ“ä½œï¼Œæ­¤ä¿®æ”¹æ“ä½œä¼šä½¿ç¬¬ä¸€æ¬¡æŸ¥è¯¢å¹¶ç¼“å­˜çš„æ•°æ®å¤±æ•ˆï¼Œå› æ­¤ç¬¬äºŒæ¬¡æŸ¥è¯¢ä¼šå†æ¬¡è®¿é—®æ•°æ®åº“ã€‚</p></blockquote><p>æµ‹è¯•ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryMemberById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession1 <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession2 <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">MemberDAO</span> memberDAO1 <span class="token operator">=</span> sqlSession1<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Member</span> member1 <span class="token operator">=</span> memberDAO1<span class="token punctuation">.</span><span class="token function">queryMemberById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>member1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    member1<span class="token punctuation">.</span><span class="token function">setMemberAge</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSession1<span class="token punctuation">.</span><span class="token function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">MemberDAO</span> memberDAO2 <span class="token operator">=</span> sqlSession1<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Member</span> member2 <span class="token operator">=</span>memberDAO2<span class="token punctuation">.</span><span class="token function">queryMemberById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>member2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_16-2-2-ä¸¤æ¬¡æŸ¥è¯¢ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_16-2-2-ä¸¤æ¬¡æŸ¥è¯¢ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´é—®é¢˜" aria-hidden="true">#</a> 16.2.2 ä¸¤æ¬¡æŸ¥è¯¢ä¸æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´é—®é¢˜</h6><figure><img src="https://gaofee.cc/images/202303171047374.png" alt="1616660132980" tabindex="0" loading="lazy"><figcaption>1616660132980</figcaption></figure><h6 id="_16-2-3-äºŒçº§ç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#_16-2-3-äºŒçº§ç¼“å­˜" aria-hidden="true">#</a> 16.2.3 äºŒçº§ç¼“å­˜</h6><blockquote><p>äºŒçº§ç¼“å­˜ä¹Ÿç§°ä¸ºSqlSessionFactoryçº§ç¼“å­˜ï¼Œé€šè¿‡åŒä¸€ä¸ªfactoryå¯¹è±¡è·å–çš„Sqlsessionå¯ä»¥å…±äº«äºŒçº§ç¼“å­˜ï¼›åœ¨åº”ç”¨æœåŠ¡å™¨ä¸­SqlSessionFactoryæ˜¯å•ä¾‹çš„ï¼Œå› æ­¤æˆ‘ä»¬äºŒçº§ç¼“å­˜å¯ä»¥å®ç°å…¨å±€å…±äº«ã€‚</p><p>ç‰¹æ€§ï¼š</p><p>1.äºŒçº§ç¼“å­˜é»˜è®¤æ²¡æœ‰å¼€å¯ï¼Œéœ€è¦åœ¨mybatis-config.xmlä¸­çš„settingsæ ‡ç­¾å¼€å¯</p><p>2.äºŒçº§ç¼“å­˜åªèƒ½ç¼“å­˜å®ç°åºåˆ—åŒ–æ¥å£çš„å¯¹è±¡</p><ol start="3"><li></li></ol></blockquote><ul><li>åœ¨mybatis-config.xmlå¼€å¯ä½¿ç”¨äºŒçº§ç¼“å­˜</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨éœ€è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„Mapperæ–‡ä»¶ä¸­é…ç½®cacheæ ‡ç­¾ä½¿ç”¨åŠŸèƒ½äºŒçº§ç¼“å­˜</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>è¢«ç¼“å­˜çš„å®ä½“ç±»å®ç°åºåˆ—åŒ–æ¥å£</li></ul><div class="language-JAVA line-numbers-mode" data-ext="JAVA"><pre class="language-JAVA"><code>@Data
@NoArgsConstructor
@AllArgsConstructor
@ToString
public class Member implements Serializable {
    private int memberId;
    private String memberNick;
    private String memberGender;
    private int memberAge;
    private String memberCity;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æµ‹è¯•</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryMemberById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSessionFactory</span> factory <span class="token operator">=</span><span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getSqlSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1.å¤šä¸ªSqlSessionå¯¹è±¡å¿…é¡»æ¥è‡ªäºåŒä¸€ä¸ªSqlSessionFactory</span>
    <span class="token class-name">SqlSession</span> sqlSession1 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SqlSession</span> sqlSession2 <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sqlSession1 <span class="token operator">==</span> sqlSession2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">MemberDAO</span> memberDAO1 <span class="token operator">=</span> sqlSession1<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Member</span> member1 <span class="token operator">=</span> memberDAO1<span class="token punctuation">.</span><span class="token function">queryMemberById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>member1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSession1<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token comment">//2.ç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¹‹åæ‰§è¡ŒsqlSession1.commit()ï¼Œä¼šå°†å½“å‰sqlsessionçš„æŸ¥è¯¢ç»“æœç¼“å­˜åˆ°äºŒçº§ç¼“å­˜</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">MemberDAO</span> memberDAO2 <span class="token operator">=</span> sqlSession2<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">MemberDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Member</span> member2 <span class="token operator">=</span>memberDAO2<span class="token punctuation">.</span><span class="token function">queryMemberById</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>member2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_16-3-æŸ¥è¯¢æ“ä½œçš„ç¼“å­˜å¼€å…³" tabindex="-1"><a class="header-anchor" href="#_16-3-æŸ¥è¯¢æ“ä½œçš„ç¼“å­˜å¼€å…³" aria-hidden="true">#</a> 16.3 æŸ¥è¯¢æ“ä½œçš„ç¼“å­˜å¼€å…³</h4><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryMemberById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>memberMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">useCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select member_id,member_nick,member_gender,member_age,member_city
    from members
    where member_id=#{mid}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åä¸ƒã€å»¶è¿ŸåŠ è½½" tabindex="-1"><a class="header-anchor" href="#åä¸ƒã€å»¶è¿ŸåŠ è½½" aria-hidden="true">#</a> åä¸ƒã€å»¶è¿ŸåŠ è½½</h2><blockquote><p>å»¶è¿ŸåŠ è½½â€”â€”å¦‚æœåœ¨MyBatiså¼€å¯äº†å»¶è¿ŸåŠ è½½ï¼Œåœ¨æ‰§è¡Œäº†å­æŸ¥è¯¢ï¼ˆè‡³å°‘æŸ¥è¯¢ä¸¤æ¬¡åŠä»¥ä¸Šï¼‰æ—¶ï¼Œé»˜è®¤åªæ‰§è¡Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œå½“ç”¨åˆ°å­æŸ¥è¯¢çš„æŸ¥è¯¢ç»“æœæ—¶ï¼Œæ‰ä¼šè§¦å‘å­æŸ¥è¯¢çš„æ‰§è¡Œï¼›å¦‚æœæ— éœ€ä½¿ç”¨å­æŸ¥è¯¢ç»“æœï¼Œåˆ™å­æŸ¥è¯¢ä¸ä¼šæ‰§è¡Œ.</p></blockquote><p>å¼€å¯å»¶è¿ŸåŠ è½½ï¼š</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Clazz<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classId<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cname<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>className<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cdesc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classDesc<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.qfedu.dao.StudentDAO.queryStudentsByCid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fetchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryClassByCid<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select cid,cname,cdesc
    from classes
    where cid=#{cid}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryClassByCid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token class-name">ClassDAO</span> classDAO <span class="token operator">=</span> <span class="token class-name">MyBatisUtil</span><span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">ClassDAO</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Clazz</span> clazz <span class="token operator">=</span> classDAO<span class="token punctuation">.</span><span class="token function">queryClassByCid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getStus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œæ—¥å¿—ï¼š</p><figure><img src="https://gaofee.cc/images/202303171047376.png" alt="1616663783657" tabindex="0" loading="lazy"><figcaption>1616663783657</figcaption></figure><h2 id="ç»ƒä¹ ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#ç»ƒä¹ ä»»åŠ¡" aria-hidden="true">#</a> ç»ƒä¹ ä»»åŠ¡</h2><blockquote><p>jsp+servlet+<code>mybatis</code></p></blockquote><p>å•†å“ä¿¡æ¯çš„CRUD</p><ul><li>æ·»åŠ å•†å“</li><li>å•†å“åˆ—è¡¨+åˆ†é¡µ</li><li>åˆ é™¤å•†å“</li><li>ä¿®æ”¹å•†å“</li><li>å•†å“è¯¦æƒ…</li></ul></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: â€œ79527743@qq.comâ€">â€œgaofeeâ€</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><!----><a href="/javadocs/ssm/day02-Spring.html" class="nav-link next" aria-label="day02-Spring"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">day02-Spring<span class="font-icon icon iconfont icon-note" style=""></span></div></a></nav><div class="waline-wrapper" id="comment" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">æ˜µç§°</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">é‚®ç®±</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">ç½‘å€</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="è¯·ç•™è¨€ã€‚(å¡«å†™é‚®ç®±å¯åœ¨è¢«å›å¤æ—¶æ”¶åˆ°é‚®ä»¶æé†’)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>é¢„è§ˆ:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="è¡¨æƒ…" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="è¡¨æƒ…åŒ…"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="ä¸Šä¼ å›¾ç‰‡"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="é¢„è§ˆ"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-text-number">0 <!--v-if--> Â å­—</div><button type="button" class="wl-btn">ç™»å½•</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->æäº¤<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="æœç´¢è¡¨æƒ…åŒ…"><div class="wl-gallery" style="gap:6px;"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> è¯„è®º</div><ul class="wl-sort"><!--[--><li class="active">æŒ‰æ­£åº</li><li class="">æŒ‰å€’åº</li><li class="">æŒ‰çƒ­åº¦</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.14.8</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">é»˜è®¤é¡µè„š</div><div class="copyright">Copyright Â© 2023 ä»£ç å²›</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-fb5cc174.js" defer></script>
  </body>
</html>
